import{a as V,b as q}from"./chunk-ZWIYMAYH.js";import{d as D}from"./chunk-Q3PSKWJA.js";import{e as A,h as j,i as $,j as L,k as U}from"./chunk-6CKB7PEI.js";import"./chunk-MD5RATJP.js";import"./chunk-QRAL5O2C.js";import{ra as B}from"./chunk-724CLJNZ.js";import{a as H}from"./chunk-H7Z7H6FO.js";import{$a as l,Aa as w,Bb as i,Cb as x,Db as T,Dc as I,Eb as S,Fc as F,Ga as P,Jb as z,La as c,Qa as m,Sb as k,Tb as y,ab as n,bb as a,cb as p,lb as C,nb as M,qc as K,rc as N,uc as E,va as s,wc as d}from"./chunk-YLSQQ73F.js";import"./chunk-4CLCTAJ7.js";var v=class o{onBack=new w;handleBack(){this.onBack.emit()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=c({type:o,selectors:[["app-registros-hero"]],outputs:{onBack:"onBack"},decls:8,vars:0,consts:[[1,"registros-hero"],[1,"hero-content"],[1,"hero-text"],[1,"hero-title"],[1,"hero-subtitle"],["label","Volver al Formulario","variant","secondary","icon","pi pi-arrow-left",3,"onClick"]],template:function(t,r){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"Mis Registros"),a(),n(5,"p",4),i(6,"Historial de tus registros de recolecci\xF3n"),a()(),n(7,"app-button",5),C("onClick",function(){return r.handleBack()}),a()()())},dependencies:[d,A],styles:[".registros-hero[_ngcontent-%COMP%]{background:#0d2a72;padding:2rem;border-radius:12px;margin-bottom:2rem;box-shadow:0 2px 8px #0d2a721a}.registros-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1.5rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{flex:1}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 .5rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#ffffffe6;margin:0}@media (max-width: 768px){.registros-hero[_ngcontent-%COMP%]{padding:1.5rem}.registros-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.5rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:.875rem}}"]})};var W=()=>[5,10,20];function X(o,e){o&1&&(n(0,"div",4),p(1,"i",5),n(2,"p"),i(3,"Cargando registros..."),a()())}function Y(o,e){o&1&&(n(0,"div",6),p(1,"i",7),n(2,"p",8),i(3,"No hay registros todav\xEDa"),a(),n(4,"p",9),i(5,"Realiza tu primer registro desde el formulario"),a()())}function Z(o,e){o&1&&(n(0,"tr")(1,"th",15),i(2,"Fecha "),p(3,"p-sortIcon",16),a(),n(4,"th",17),i(5,"Tipo de Recolecci\xF3n "),p(6,"p-sortIcon",18),a(),n(7,"th"),i(8,"Detalle de Residuos"),a(),n(9,"th",19),i(10,"Total Recolectado (kg)"),a()())}function ee(o,e){o&1&&(n(0,"span"),i(1,", "),a())}function te(o,e){if(o&1&&(n(0,"span",30),i(1),m(2,ee,2,0,"span",31),a()),o&2){let t=e.$implicit,r=e.last;s(),S(" ",t.nombre,": ",t.kg.toFixed(2)," kg"),s(),l("ngIf",!r)}}function ne(o,e){o&1&&(n(0,"div",32),i(1," Sin detalles "),a())}function oe(o,e){if(o&1&&(n(0,"tr")(1,"td")(2,"div",20),p(3,"i",21),n(4,"span",22),i(5),k(6,"date"),a()(),n(7,"div",23),i(8),k(9,"date"),a()(),n(10,"td"),p(11,"p-tag",24),a(),n(12,"td")(13,"div",25),m(14,te,3,3,"span",26),a(),m(15,ne,2,0,"div",27),a(),n(16,"td",19)(17,"span",28),i(18),a(),n(19,"span",29),i(20,"kg"),a()()()),o&2){let t=e.$implicit,r=M(2);s(5),x(y(6,8,t.fechaRegistro,"dd/MM/yyyy")),s(3),T(" ",y(9,11,t.fechaRegistro,"HH:mm")," "),s(3),l("value",r.getTipoLabel(t.tipoRecoleccion))("severity",r.getTipoSeverity(t.tipoRecoleccion))("rounded",!0),s(3),l("ngForOf",r.getDetalles(t)),s(),l("ngIf",r.getDetalles(t).length===0),s(3),x(r.getTotalFormatted(t))}}function ae(o,e){o&1&&(n(0,"tr")(1,"td",33)(2,"div",34),p(3,"i",35),n(4,"p"),i(5,"No se encontraron registros"),a()()()())}function re(o,e){if(o&1&&(n(0,"div",10)(1,"p-table",11),m(2,Z,11,0,"ng-template",12)(3,oe,21,14,"ng-template",13)(4,ae,6,0,"ng-template",14),a()()),o&2){let t=M();s(),l("value",t.registros)("paginator",!0)("rows",10)("rowsPerPageOptions",z(5,W))("showCurrentPageReport",!0)}}var O=class o{registros=[];loading=!1;getTipoLabel(e){return{pilas:"Pilas",canastillas:"Canastillas",papel_oficina:"Tachos"}[e]||e}getTipoSeverity(e){return{pilas:"info",canastillas:"success",papel_oficina:"warn"}[e]||"info"}getTotal(e){let t=Number(e.plasticosKg||e.plasticos_kg||0),r=Number(e.organicosKg||e.organicos_kg||0),g=Number(e.vidrioKg||e.vidrio_kg||0),b=Number(e.metalesKg||e.metales_kg||0),f=Number(e.papelCartonKg||e.papel_carton_kg||0),_=Number(e.noAprovechablesKg||e.no_aprovechables_kg||0),u=Number(e.botellasKg||e.botellas_kg||0),h=Number(e.papelOficinaKg||e.papel_oficina_kg||0);return t+r+g+b+f+_+u+h}getTotalFormatted(e){let t=this.getTotal(e);return isNaN(t)?"0.00":t.toFixed(2)}getDetalles(e){let t=[],r=Number(e.plasticosKg||e.plasticos_kg||0),g=Number(e.organicosKg||e.organicos_kg||0),b=Number(e.vidrioKg||e.vidrio_kg||0),f=Number(e.metalesKg||e.metales_kg||0),_=Number(e.papelCartonKg||e.papel_carton_kg||0),u=Number(e.noAprovechablesKg||e.no_aprovechables_kg||0),h=Number(e.botellasKg||e.botellas_kg||0),R=Number(e.papelOficinaKg||e.papel_oficina_kg||0);return r>0&&t.push({nombre:"Pl\xE1sticos",kg:r}),g>0&&t.push({nombre:"Org\xE1nicos",kg:g}),b>0&&t.push({nombre:"Vidrio",kg:b}),f>0&&t.push({nombre:"Metales",kg:f}),_>0&&t.push({nombre:"Papel/Cart\xF3n",kg:_}),u>0&&t.push({nombre:"No Aprovechables",kg:u}),h>0&&t.push({nombre:"Botellas",kg:h}),R>0&&t.push({nombre:"Papel Oficina",kg:R}),t}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=c({type:o,selectors:[["app-registros-table"]],inputs:{registros:"registros",loading:"loading"},decls:4,vars:3,consts:[[1,"registros-table-wrapper"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","registros-table-container",4,"ngIf"],[1,"loading-state"],[1,"pi","pi-spin","pi-spinner"],[1,"empty-state"],[1,"pi","pi-inbox"],[1,"empty-title"],[1,"empty-subtitle"],[1,"registros-table-container"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} registros","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","fechaRegistro"],["field","fechaRegistro"],["pSortableColumn","tipoRecoleccion"],["field","tipoRecoleccion"],[1,"text-center"],[1,"fecha-cell"],[1,"pi","pi-calendar"],[1,"fecha-principal"],[1,"hora-cell"],["styleClass","text-base px-4 py-2",3,"value","severity","rounded"],[1,"detalles-residuos"],["class","detalle-item",4,"ngFor","ngForOf"],["class","sin-detalles",4,"ngIf"],[1,"total-kg"],[1,"kg-label"],[1,"detalle-item"],[4,"ngIf"],[1,"sin-detalles"],["colspan","4",1,"empty-message"],[1,"no-data"],[1,"pi","pi-inbox",2,"font-size","3rem","color","#ccc"]],template:function(t,r){t&1&&(n(0,"div",0),m(1,X,4,0,"div",1)(2,Y,6,0,"div",2)(3,re,5,6,"div",3),a()),t&2&&(s(),l("ngIf",r.loading),s(),l("ngIf",!r.loading&&r.registros.length===0),s(),l("ngIf",!r.loading&&r.registros.length>0))},dependencies:[d,K,N,U,j,B,$,L,q,V,E],styles:[".registros-table-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;overflow:hidden}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;gap:1rem}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#0d2a72}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;margin:0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;gap:.5rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#d1d5db;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#374151;margin:0}.empty-state[_ngcontent-%COMP%]   .empty-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0}.registros-table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 2rem;color:#6b7280}.registros-table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:1rem}.registros-table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.registros-table-container[_ngcontent-%COMP%]   .fecha-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.registros-table-container[_ngcontent-%COMP%]   .fecha-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem}.registros-table-container[_ngcontent-%COMP%]   .fecha-cell[_ngcontent-%COMP%]   .fecha-principal[_ngcontent-%COMP%]{color:#374151;font-weight:500;font-size:.875rem}.registros-table-container[_ngcontent-%COMP%]   .hora-cell[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;margin-top:.25rem;margin-left:1.5rem}.registros-table-container[_ngcontent-%COMP%]   .detalles-residuos[_ngcontent-%COMP%]   .detalle-item[_ngcontent-%COMP%]{color:#374151;font-size:.875rem}.registros-table-container[_ngcontent-%COMP%]   .sin-detalles[_ngcontent-%COMP%]{color:#9ca3af;font-size:.875rem;font-style:italic}.registros-table-container[_ngcontent-%COMP%]   .total-kg[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#0d2a72}.registros-table-container[_ngcontent-%COMP%]   .kg-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin-left:.25rem}  .registros-table-container .p-datatable .p-datatable-thead>tr>th{background-color:#0d2a72;color:#fff;border:1px solid #0a1f54;padding:1rem;font-weight:600;font-size:.875rem;text-align:left}  .registros-table-container .p-datatable .p-datatable-thead>tr>th.text-center{text-align:center}  .registros-table-container .p-datatable .p-datatable-thead>tr>th .p-sortable-column-icon{color:#fff;margin-left:.5rem}  .registros-table-container .p-datatable .p-datatable-thead>tr>th:hover{background-color:#0f3085}  .registros-table-container .p-datatable .p-datatable-tbody>tr{transition:background-color .2s ease}  .registros-table-container .p-datatable .p-datatable-tbody>tr:nth-child(2n){background-color:#f9fafb}  .registros-table-container .p-datatable .p-datatable-tbody>tr:hover{background-color:#f3f4f6}  .registros-table-container .p-datatable .p-datatable-tbody>tr>td{border:1px solid #e5e7eb;padding:1rem;font-size:.875rem;color:#374151}  .registros-table-container .p-datatable .p-datatable-tbody>tr>td.text-center{text-align:center}  .registros-table-container .p-datatable .p-datatable-tbody>tr>td.empty-message{border:none;padding:0}  .registros-table-container .p-datatable .p-paginator{background:#f9fafb;border-top:1px solid #e5e7eb;padding:.75rem 1rem}  .registros-table-container .p-datatable .p-paginator .p-paginator-current{color:#374151;font-size:.875rem}  .registros-table-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2.5rem;height:2.5rem;border-radius:6px;color:#374151;font-weight:500}  .registros-table-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page.p-highlight{background-color:#0d2a72;border-color:#0d2a72;color:#fff}  .registros-table-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page:hover:not(.p-highlight){background-color:#e5e7eb}  .registros-table-container .p-datatable .p-paginator .p-dropdown{border-color:#d1d5db}  .registros-table-container .p-datatable .p-paginator .p-dropdown:hover{border-color:#0d2a72}  .p-tag{font-weight:600;font-size:.875rem}  .p-tag.p-tag-info{background-color:#3b82f6}  .p-tag.p-tag-success{background-color:#10b981}  .p-tag.p-tag-warn{background-color:#f59e0b}@media (max-width: 768px){.registros-table-container[_ngcontent-%COMP%]     .p-datatable{font-size:.75rem}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.75rem .5rem;font-size:.75rem;min-width:100px}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.625rem .5rem;font-size:.75rem;min-width:100px;max-height:3rem;overflow:hidden;line-height:1.4;word-break:break-word;white-space:nowrap;text-overflow:ellipsis}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-paginator{padding:.5rem;font-size:.75rem}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2rem;height:2rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:3rem 1.5rem}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}}@media (max-width: 480px){.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.5rem .25rem;font-size:.7rem;min-width:90px}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.5rem .25rem;font-size:.7rem;min-width:90px;max-height:2.8rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:2rem 1rem}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}}"]})};var Q=class o{constructor(e,t){this.http=e;this.router=t}registros=[];loading=!0;apiUrl=H.apiUrl;ngOnInit(){this.loadRegistros()}loadRegistros(){let e=localStorage.getItem("access_token"),t=new I({Authorization:`Bearer ${e}`});this.http.get(`${this.apiUrl}/registros/personal/historial`,{headers:t}).subscribe({next:r=>{this.registros=r.registros,this.loading=!1},error:r=>{this.loading=!1}})}volver(){this.router.navigate(["/app/personal/dashboard"])}static \u0275fac=function(t){return new(t||o)(P(F),P(D))};static \u0275cmp=c({type:o,selectors:[["app-registros"]],decls:4,vars:2,consts:[[1,"registros-page"],[1,"page-container"],[3,"onBack"],[3,"registros","loading"]],template:function(t,r){t&1&&(n(0,"div",0)(1,"div",1)(2,"app-registros-hero",2),C("onBack",function(){return r.volver()}),a(),p(3,"app-registros-table",3),a()()),t&2&&(s(3),l("registros",r.registros)("loading",r.loading))},dependencies:[d,v,O],styles:[".registros-page[_ngcontent-%COMP%]{min-height:100vh;background:#f3f4f6;padding:2rem}.registros-page[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}@media (max-width: 768px){.registros-page[_ngcontent-%COMP%]{padding:1rem}}@media (max-width: 480px){.registros-page[_ngcontent-%COMP%]{padding:.75rem}}"]})};export{Q as RegistrosComponent};

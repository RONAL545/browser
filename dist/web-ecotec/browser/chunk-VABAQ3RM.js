import{a as z,b as R}from"./chunk-I2MWH7UF.js";import{a as ue,b as be}from"./chunk-ZXC7XE54.js";import{a as rt,b as lt}from"./chunk-ADSAMHCS.js";import{a as Ce,b as pt,c as dt,d as mt}from"./chunk-KX5ZS23E.js";import{a as ct}from"./chunk-EM3PZ2DS.js";import{e as Q,h as me,i as ge,j as fe,k as _e}from"./chunk-6CKB7PEI.js";import{g as de,h as H,i as W}from"./chunk-MD5RATJP.js";import{K as st,L as N,a as Te,c as re,d as $,f as V,g as Ye,h as le,i as et,j as tt,k as it,m as nt,n as se,o as ot,p as at,q as ce,r as pe}from"./chunk-QRAL5O2C.js";import{I as G,Z as Ee,c as $e,d as xe,f as oe,h as Oe,i as Se,ia as A,ja as B,k as we,qa as Je,ra as j,sa as ae,ta as Ie,ya as Ke}from"./chunk-724CLJNZ.js";import{a as Xe}from"./chunk-H7Z7H6FO.js";import{$a as s,Aa as b,Ab as U,Ba as ze,Bb as d,Cb as k,Db as We,Fb as h,Fc as Ge,Ga as u,Gb as P,Hb as v,Ib as te,Jb as ie,Kb as ne,L as J,La as C,M as je,Ma as Re,Mb as Qe,Oa as He,P as Le,Q as Ae,Qa as m,Ub as L,V as y,W as x,Xa as T,Ya as I,ab as a,bb as r,cb as f,ea as Be,ec as O,fa as Ve,fc as qe,ib as K,jb as F,lb as g,nb as p,ob as X,pb as Y,pc as Ze,qa as Ne,qb as S,rc as D,sb as w,tb as E,tc as Ue,va as c,wc as M,zb as ee}from"./chunk-YLSQQ73F.js";import"./chunk-4CLCTAJ7.js";function Mt(t,i){t&1&&(a(0,"small",15),d(1," La sede es requerida "),r())}function yt(t,i){t&1&&(a(0,"small",15),d(1," El edificio es requerido "),r())}function xt(t,i){t&1&&(a(0,"small",15),d(1," El c\xF3digo es requerido (m\xE1x. 50 caracteres) "),r())}function Ot(t,i){if(t&1&&(a(0,"div",1),f(1,"p-message",16),r()),t&2){let e=p();c(),s("text",e.errorMessage)}}var he=class t{constructor(i,e,n){this.fb=i;this.sedeService=e;this.edificioService=n;this.pilaForm=this.fb.group({sedeId:["",$.required],edificioId:["",$.required],codigo:["",[$.required,$.maxLength(50)]]})}pila=null;save=new b;cancel=new b;pilaForm;sedes=[];edificios=[];edificiosFiltrados=[];loading=!1;errorMessage="";ngOnInit(){this.loadSedes(),this.loadEdificios(),this.pilaForm.get("edificioId")?.disable(),this.pilaForm.get("sedeId")?.valueChanges.subscribe(i=>{this.filterEdificios(i),this.pilaForm.patchValue({edificioId:""}),i?this.pilaForm.get("edificioId")?.enable():this.pilaForm.get("edificioId")?.disable()}),this.pila&&this.pilaForm.patchValue({sedeId:this.pila.edificio?.sede?.id||"",edificioId:this.pila.edificioId,codigo:this.pila.codigo})}loadSedes(){this.sedeService.getSedes().subscribe({next:i=>{this.sedes=i},error:i=>{this.errorMessage="Error al cargar las sedes"}})}loadEdificios(){this.edificioService.getEdificios().subscribe({next:i=>{this.edificios=i,this.pila&&this.filterEdificios(this.pila.edificio?.sede?.id||"")},error:i=>{this.errorMessage="Error al cargar los edificios"}})}filterEdificios(i){i?this.edificiosFiltrados=this.edificios.filter(e=>e.sedeId===i):this.edificiosFiltrados=[]}onSubmit(){if(this.pilaForm.invalid){this.pilaForm.markAllAsTouched();return}this.loading=!0,this.errorMessage="";let i=this.pilaForm.value,e={codigo:i.codigo,edificioId:i.edificioId};this.save.emit(e)}onCancel(){this.cancel.emit()}get codigo(){return this.pilaForm.get("codigo")}get sedeId(){return this.pilaForm.get("sedeId")}get edificioId(){return this.pilaForm.get("edificioId")}static \u0275fac=function(e){return new(e||t)(u(nt),u(dt),u(mt))};static \u0275cmp=C({type:t,selectors:[["app-pila-form"]],inputs:{pila:"pila"},outputs:{save:"save",cancel:"cancel"},decls:26,vars:10,consts:[[1,"pila-form",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","sede",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["id","sede","formControlName","sedeId","optionLabel","nombre","optionValue","id","placeholder","Seleccione una sede","styleClass","w-full",3,"options"],["class","text-red-600",4,"ngIf"],["for","edificio",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","edificio","formControlName","edificioId","optionLabel","nombre","optionValue","id","placeholder","Seleccione un edificio","styleClass","w-full",3,"options"],[1,"mb-6"],["for","codigo",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["pInputText","","id","codigo","formControlName","codigo","placeholder","Ej: EDF-A-P01",1,"w-full"],["class","mb-4",4,"ngIf"],[1,"button-container"],["type","button","label","Cancelar","variant","secondary","icon","pi pi-times",3,"onClick"],["type","submit","variant","primary","icon","pi pi-save",3,"disabled","label","loading"],[1,"text-red-600"],["severity","error","styleClass","w-full",3,"text"]],template:function(e,n){e&1&&(a(0,"form",0),g("ngSubmit",function(){return n.onSubmit()}),a(1,"div",1)(2,"label",2),d(3," Sede "),a(4,"span",3),d(5,"*"),r()(),f(6,"p-select",4),m(7,Mt,2,0,"small",5),r(),a(8,"div",1)(9,"label",6),d(10," Edificio "),a(11,"span",3),d(12,"*"),r()(),f(13,"p-select",7),m(14,yt,2,0,"small",5),r(),a(15,"div",8)(16,"label",9),d(17," C\xF3digo de Pila "),a(18,"span",3),d(19,"*"),r()(),f(20,"input",10),m(21,xt,2,0,"small",5),r(),m(22,Ot,2,1,"div",11),a(23,"div",12)(24,"app-button",13),g("onClick",function(){return n.onCancel()}),r(),f(25,"app-button",14),r()()),e&2&&(s("formGroup",n.pilaForm),c(6),s("options",n.sedes),c(),s("ngIf",(n.sedeId==null?null:n.sedeId.invalid)&&(n.sedeId==null?null:n.sedeId.touched)),c(6),s("options",n.edificiosFiltrados),c(),s("ngIf",(n.edificioId==null?null:n.edificioId.invalid)&&(n.edificioId==null?null:n.edificioId.touched)),c(7),s("ngIf",(n.codigo==null?null:n.codigo.invalid)&&(n.codigo==null?null:n.codigo.touched)),c(),s("ngIf",n.errorMessage),c(3),s("disabled",n.loading)("label",n.loading?"Guardando...":"Guardar")("loading",n.loading))},dependencies:[M,D,ot,et,re,V,Ye,tt,it,pe,ce,N,Q,R,z,W,H],styles:[".pila-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#1f2937;font-weight:600}.pila-form[_ngcontent-%COMP%]   .p-select[_ngcontent-%COMP%], .pila-form[_ngcontent-%COMP%]   input[pInputText][_ngcontent-%COMP%]{border:2px solid #e5e7eb;transition:all .2s ease}.pila-form[_ngcontent-%COMP%]   .p-select[_ngcontent-%COMP%]:focus, .pila-form[_ngcontent-%COMP%]   .p-select[_ngcontent-%COMP%]:focus-within, .pila-form[_ngcontent-%COMP%]   input[pInputText][_ngcontent-%COMP%]:focus, .pila-form[_ngcontent-%COMP%]   input[pInputText][_ngcontent-%COMP%]:focus-within{border-color:#0d2a72;box-shadow:0 0 0 .2rem #0d2a7226}.pila-form[_ngcontent-%COMP%]   small.text-red-600[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.25rem;display:block}.pila-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}@media (max-width: 768px){.pila-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex-direction:column}.pila-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{width:100%}}"]})};var Tt=()=>[10,25,50];function It(t,i){t&1&&(a(0,"tr")(1,"th",16),d(2,"C\xF3digo "),f(3,"p-sortIcon",17),r(),a(4,"th",18),d(5,"Sede "),f(6,"p-sortIcon",19),r(),a(7,"th",20),d(8,"Edificio "),f(9,"p-sortIcon",21),r(),a(10,"th",22),d(11,"Acciones"),r()())}function Ft(t,i){if(t&1){let e=F();a(0,"tr")(1,"td")(2,"strong"),d(3),r()(),a(4,"td"),d(5),r(),a(6,"td"),d(7),r(),a(8,"td",23)(9,"app-button",24),g("onClick",function(){let o=y(e).$implicit,l=p();return x(l.onEdit(o))}),r(),a(10,"app-button",25),g("onClick",function(){let o=y(e).$implicit,l=p();return x(l.onDelete(o))}),r()()()}if(t&2){let e=i.$implicit;c(3),k(e.codigo),c(2),k((e.edificio==null||e.edificio.sede==null?null:e.edificio.sede.nombre)||"N/A"),c(2),k((e.edificio==null?null:e.edificio.nombre)||"N/A"),c(2),s("rounded",!0)("iconOnly",!0),c(),s("rounded",!0)("iconOnly",!0)}}function kt(t,i){if(t&1){let e=F();a(0,"tr")(1,"td",26)(2,"div",27),f(3,"i",28),a(4,"p"),d(5,"No hay pilas registradas"),r(),a(6,"app-button",29),g("onClick",function(){y(e);let o=p();return x(o.onAdd())}),r()()()()}}var ve=class t{constructor(i,e){this.sedeService=i;this.edificioService=e}pilas=[];loading=!1;edit=new b;delete=new b;add=new b;sedes=[];edificios=[];selectedSede=null;selectedEdificio=null;filteredPilas=[];ngOnInit(){this.loadSedes(),this.filteredPilas=[...this.pilas]}ngOnChanges(i){i.pilas&&this.applyFilters()}loadSedes(){this.sedeService.getSedes().subscribe({next:i=>{this.sedes=i},error:i=>{}})}loadEdificios(){let i=this.selectedSede?.id;this.edificioService.getAll(i).subscribe({next:e=>{this.edificios=e},error:e=>{}})}onSedeChange(){this.selectedEdificio=null,this.edificios=[],this.selectedSede&&this.loadEdificios(),this.applyFilters()}onEdificioChange(){this.applyFilters()}applyFilters(){let i=[...this.pilas];this.selectedSede&&(i=i.filter(e=>e.edificio?.sede?.id===this.selectedSede.id)),this.selectedEdificio&&(i=i.filter(e=>e.edificio?.id===this.selectedEdificio.id)),this.filteredPilas=i}onEdit(i){this.edit.emit(i)}onDelete(i){confirm(`\xBFEst\xE1 seguro de eliminar la pila "${i.codigo}"?`)&&this.delete.emit(i)}onAdd(){this.add.emit()}static \u0275fac=function(e){return new(e||t)(u(ue),u(be))};static \u0275cmp=C({type:t,selectors:[["app-pila-list"]],inputs:{pilas:"pilas",loading:"loading"},outputs:{edit:"edit",delete:"delete",add:"add"},features:[Be],decls:19,vars:14,consts:[[1,"pila-list-container"],[1,"filters-section"],[1,"filters-row"],[1,"filters-group"],[1,"filter-item"],["for","sedeFilter",1,"filter-label"],["id","sedeFilter","optionLabel","nombre","placeholder","Todas las sedes",3,"ngModelChange","onChange","ngModel","options","showClear"],["for","edificioFilter",1,"filter-label"],["id","edificioFilter","optionLabel","nombre","placeholder","Todos los edificios",3,"ngModelChange","onChange","ngModel","options","showClear","disabled"],[1,"button-item"],["label","Nueva Pila","variant","success","icon","pi pi-plus",3,"onClick"],[1,"pila-table-card"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} pilas","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","loading","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","codigo"],["field","codigo"],["pSortableColumn","edificio.sede.nombre"],["field","edificio.sede.nombre"],["pSortableColumn","edificio.nombre"],["field","edificio.nombre"],[1,"text-center"],[1,"text-center","actions-cell"],["icon","pi pi-pencil","variant","info","tooltip","Editar",3,"onClick","rounded","iconOnly"],["icon","pi pi-trash","variant","danger","tooltip","Eliminar",3,"onClick","rounded","iconOnly"],["colspan","4",1,"empty-message"],[1,"no-data"],[1,"pi","pi-inbox",2,"font-size","3rem","color","#ccc"],["label","Crear Primera Pila","variant","success","icon","pi pi-plus",3,"onClick"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),d(6,"Filtrar por Sede"),r(),a(7,"p-select",6),v("ngModelChange",function(l){return P(n.selectedSede,l)||(n.selectedSede=l),l}),g("onChange",function(){return n.onSedeChange()}),r()(),a(8,"div",4)(9,"label",7),d(10,"Filtrar por Edificio"),r(),a(11,"p-select",8),v("ngModelChange",function(l){return P(n.selectedEdificio,l)||(n.selectedEdificio=l),l}),g("onChange",function(){return n.onEdificioChange()}),r()()(),a(12,"div",9)(13,"app-button",10),g("onClick",function(){return n.onAdd()}),r()()()(),a(14,"div",11)(15,"p-table",12),m(16,It,12,0,"ng-template",13)(17,Ft,11,7,"ng-template",14)(18,kt,7,0,"ng-template",15),r()()()),e&2&&(c(7),h("ngModel",n.selectedSede),s("options",n.sedes)("showClear",!0),c(4),h("ngModel",n.selectedEdificio),s("options",n.edificios)("showClear",!0)("disabled",!n.selectedSede),c(4),s("value",n.filteredPilas)("loading",n.loading)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",ie(13,Tt)))},dependencies:[M,se,V,le,_e,me,j,ge,fe,N,de,W,H,Q],styles:[".pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{background:var(--surface-card);border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000001a;margin-bottom:1rem}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:2rem;align-items:end}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filters-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;justify-self:start}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filters-group[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filters-group[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:block;font-weight:var(--font-semibold);color:#495057;font-size:var(--text-sm);margin:0}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filters-group[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]     .p-select{width:100%;min-width:250px}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .button-item[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-self:end}.pila-list-container[_ngcontent-%COMP%]   .pila-table-card[_ngcontent-%COMP%]{background:var(--surface-card);border-radius:8px;padding:0;box-shadow:0 2px 4px #0000001a}.pila-list-container[_ngcontent-%COMP%]   .pila-table-card[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:clamp(2rem,5vw,3rem);color:#999}.pila-list-container[_ngcontent-%COMP%]   .pila-table-card[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0;font-size:var(--text-base)}  .pila-list-container .p-datatable .p-datatable-header{background:#f8f9fa;border:1px solid #e9ecef;padding:1rem;font-weight:var(--font-semibold)}  .pila-list-container .p-datatable .p-datatable-thead>tr>th{background-color:#0d2a72;color:#fff;border:1px solid #0a1f54;padding:1rem;font-weight:var(--font-semibold);font-size:var(--text-sm);text-align:left}  .pila-list-container .p-datatable .p-datatable-thead>tr>th.text-center{text-align:center}  .pila-list-container .p-datatable .p-datatable-thead>tr>th .p-sortable-column-icon{color:#fff;margin-left:.5rem}  .pila-list-container .p-datatable .p-datatable-thead>tr>th:hover{background-color:#0f3085}  .pila-list-container .p-datatable .p-datatable-tbody>tr{transition:background-color .2s ease}  .pila-list-container .p-datatable .p-datatable-tbody>tr:nth-child(2n){background-color:#f8f9fa}  .pila-list-container .p-datatable .p-datatable-tbody>tr:hover{background-color:#e9ecef}  .pila-list-container .p-datatable .p-datatable-tbody>tr>td{border:1px solid #e9ecef;padding:.875rem 1rem;font-size:var(--text-sm);color:#495057}  .pila-list-container .p-datatable .p-datatable-tbody>tr>td.text-center{text-align:center}  .pila-list-container .p-datatable .p-datatable-tbody>tr>td.actions-cell{display:flex;gap:.5rem;justify-content:center;align-items:center}  .pila-list-container .p-datatable .p-datatable-tbody>tr>td.empty-message{border:none;padding:0}  .pila-list-container .p-datatable .p-paginator{background:#f8f9fa;border:1px solid #e9ecef;padding:.5rem 1rem}  .pila-list-container .p-datatable .p-paginator .p-paginator-current{color:#495057;font-size:var(--text-sm)}  .pila-list-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2.5rem;height:2.5rem;border-radius:4px;color:#495057}  .pila-list-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page.p-highlight{background-color:#0d2a72;border-color:#0d2a72;color:#fff}  .pila-list-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page:hover:not(.p-highlight){background-color:#e9ecef}  .pila-list-container .p-datatable .p-paginator .p-dropdown{border-color:#ced4da}  .pila-list-container .p-datatable .p-paginator .p-dropdown:hover{border-color:#0d2a72}@media (max-width: 768px){.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .button-item[_ngcontent-%COMP%]{width:100%;justify-self:stretch}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .button-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filters-group[_ngcontent-%COMP%]{grid-template-columns:1fr;justify-self:stretch}.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filters-group[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]     .p-select{min-width:100%}.pila-list-container[_ngcontent-%COMP%]   .pila-table-card[_ngcontent-%COMP%]{padding:1rem}.pila-list-container[_ngcontent-%COMP%]     .p-datatable{font-size:var(--text-xs)}.pila-list-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.75rem .5rem;font-size:var(--text-xs)}.pila-list-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.625rem .5rem;font-size:var(--text-xs)}.pila-list-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td.actions-cell{flex-wrap:wrap}.pila-list-container[_ngcontent-%COMP%]     .p-datatable .p-paginator{padding:.5rem;font-size:var(--text-xs)}.pila-list-container[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2rem;height:2rem}}@media (max-width: 480px){.pila-list-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{padding:.75rem;margin-bottom:.75rem}.pila-list-container[_ngcontent-%COMP%]   .pila-table-card[_ngcontent-%COMP%]{padding:.75rem}.pila-list-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.5rem .25rem}.pila-list-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.5rem .25rem}}"]})};var ut=`
    .p-confirmdialog .p-dialog-content {
        display: flex;
        align-items: center;
        gap: dt('confirmdialog.content.gap');
    }

    .p-confirmdialog-icon {
        color: dt('confirmdialog.icon.color');
        font-size: dt('confirmdialog.icon.size');
        width: dt('confirmdialog.icon.size');
        height: dt('confirmdialog.icon.size');
    }
`;var Dt=["header"],jt=["footer"],Lt=["rejecticon"],At=["accepticon"],Bt=["message"],Vt=["icon"],Nt=["headless"],zt=[[["p-footer"]]],Rt=["p-footer"],Ht=(t,i,e)=>({$implicit:t,onAccept:i,onReject:e}),Wt=t=>({$implicit:t});function Qt(t,i){t&1&&K(0)}function qt(t,i){if(t&1&&m(0,Qt,1,0,"ng-container",7),t&2){let e=p(2);s("ngTemplateOutlet",e.headlessTemplate||e._headlessTemplate)("ngTemplateOutletContext",Qe(2,Ht,e.confirmation,e.onAccept.bind(e),e.onReject.bind(e)))}}function Zt(t,i){t&1&&m(0,qt,1,6,"ng-template",null,2,L)}function Ut(t,i){t&1&&K(0)}function Gt(t,i){if(t&1&&m(0,Ut,1,0,"ng-container",8),t&2){let e=p(3);s("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)}}function $t(t,i){t&1&&m(0,Gt,1,1,"ng-template",null,4,L)}function Jt(t,i){}function Kt(t,i){t&1&&m(0,Jt,0,0,"ng-template")}function Xt(t,i){if(t&1&&m(0,Kt,1,0,null,8),t&2){let e=p(3);s("ngTemplateOutlet",e.iconTemplate||e._iconTemplate)}}function Yt(t,i){if(t&1&&f(0,"i",12),t&2){let e=p(4);U(e.option("icon")),s("ngClass",e.cx("icon"))}}function ei(t,i){if(t&1&&m(0,Yt,1,3,"i",11),t&2){let e=p(3);s("ngIf",e.option("icon"))}}function ti(t,i){}function ii(t,i){t&1&&m(0,ti,0,0,"ng-template")}function ni(t,i){if(t&1&&m(0,ii,1,0,null,7),t&2){let e=p(3);s("ngTemplateOutlet",e.messageTemplate||e._messageTemplate)("ngTemplateOutletContext",ne(2,Wt,e.confirmation))}}function oi(t,i){if(t&1&&f(0,"span",13),t&2){let e=p(3);U(e.cx("message")),s("innerHTML",e.option("message"),Ne)}}function ai(t,i){if(t&1&&(T(0,Xt,1,1)(1,ei,1,1,"i",9),T(2,ni,1,4)(3,oi,1,3,"span",10)),t&2){let e=p(2);I(e.iconTemplate||e._iconTemplate?0:!e.iconTemplate&&!e._iconTemplate&&!e._messageTemplate&&!e.messageTemplate?1:-1),c(2),I(e.messageTemplate||e._messageTemplate?2:3)}}function ri(t,i){if(t&1&&(T(0,$t,2,0),m(1,ai,4,2,"ng-template",null,3,L)),t&2){let e=p();I(e.headerTemplate||e._headerTemplate?0:-1)}}function li(t,i){t&1&&K(0)}function si(t,i){if(t&1&&(Y(0),m(1,li,1,0,"ng-container",8)),t&2){let e=p(2);c(),s("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}function ci(t,i){if(t&1&&f(0,"i"),t&2){let e=p(6);U(e.option("rejectIcon"))}}function pi(t,i){if(t&1&&m(0,ci,1,2,"i",17),t&2){let e=p(5);s("ngIf",e.option("rejectIcon"))}}function di(t,i){}function mi(t,i){t&1&&m(0,di,0,0,"ng-template")}function gi(t,i){if(t&1&&(T(0,pi,1,1,"i",16),m(1,mi,1,0,null,8)),t&2){let e=p(4);I(e.rejectIcon&&!e.rejectIconTemplate&&!e._rejectIconTemplate?0:-1),c(),s("ngTemplateOutlet",e.rejectIconTemplate||e._rejectIconTemplate)}}function fi(t,i){if(t&1){let e=F();a(0,"p-button",15),g("onClick",function(){y(e);let o=p(3);return x(o.onReject())}),m(1,gi,2,2,"ng-template",null,5,L),r()}if(t&2){let e=p(3);s("label",e.rejectButtonLabel)("styleClass",e.getButtonStyleClass("pcRejectButton","rejectButtonStyleClass"))("ariaLabel",e.option("rejectButtonProps","ariaLabel"))("buttonProps",e.getRejectButtonProps())}}function _i(t,i){if(t&1&&f(0,"i"),t&2){let e=p(6);U(e.option("acceptIcon"))}}function ui(t,i){if(t&1&&m(0,_i,1,2,"i",17),t&2){let e=p(5);s("ngIf",e.option("acceptIcon"))}}function bi(t,i){}function Ci(t,i){t&1&&m(0,bi,0,0,"ng-template")}function hi(t,i){if(t&1&&(T(0,ui,1,1,"i",16),m(1,Ci,1,0,null,8)),t&2){let e=p(4);I(e.acceptIcon&&!e._acceptIconTemplate&&!e.acceptIconTemplate?0:-1),c(),s("ngTemplateOutlet",e.acceptIconTemplate||e._acceptIconTemplate)}}function Pi(t,i){if(t&1){let e=F();a(0,"p-button",15),g("onClick",function(){y(e);let o=p(3);return x(o.onAccept())}),m(1,hi,2,2,"ng-template",null,5,L),r()}if(t&2){let e=p(3);s("label",e.acceptButtonLabel)("styleClass",e.getButtonStyleClass("pcAcceptButton","acceptButtonStyleClass"))("ariaLabel",e.option("acceptButtonProps","ariaLabel"))("buttonProps",e.getAcceptButtonProps())}}function vi(t,i){if(t&1&&m(0,fi,3,4,"p-button",14)(1,Pi,3,4,"p-button",14),t&2){let e=p(2);s("ngIf",e.option("rejectVisible")),c(),s("ngIf",e.option("acceptVisible"))}}function Mi(t,i){if(t&1&&(T(0,si,2,1),T(1,vi,2,2)),t&2){let e=p();I(e.footerTemplate||e._footerTemplate?0:-1),c(),I(!e.footerTemplate&&!e._footerTemplate?1:-1)}}var yi={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},bt=(()=>{class t extends Ke{name="confirmdialog";theme=ut;classes=yi;static \u0275fac=(()=>{let e;return function(o){return(e||(e=Ve(t)))(o||t)}})();static \u0275prov=J({token:t,factory:t.\u0275fac})}return t})();var xi=Se([oe({transform:"{{transform}}",opacity:0}),xe("{{transition}}",oe({transform:"none",opacity:1}))]),Oi=Se([xe("{{transition}}",oe({transform:"{{transform}}",opacity:0}))]),De=(()=>{class t extends at{confirmationService;zone;header;icon;message;get style(){return this._style}set style(e){this._style=e,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;closeAriaLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo="body";key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}draggable=!0;onHide=new b;footer;_componentStyle=Ae(bt);headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;messageTemplate;iconTemplate;headlessTemplate;templates;_headerTemplate;_footerTemplate;_rejectIconTemplate;_acceptIconTemplate;_messageTemplate;_iconTemplate;_headlessTemplate;confirmation;_visible;_style;maskVisible;dialog;wrapper;contentContainer;subscription;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=Te("pn_id_");ariaLabelledBy=this.getAriaLabelledBy();translationSubscription;constructor(e,n){super(),this.confirmationService=e,this.zone=n,this.subscription=this.confirmationService.requireConfirmation$.subscribe(o=>{if(!o){this.hide();return}o.key===this.key&&(this.confirmation=o,Object.keys(o).forEach(_=>{this[_]=o[_]}),this.confirmation.accept&&(this.confirmation.acceptEvent=new b,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new b,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0)})}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;case"message":this._messageTemplate=e.template;break;case"icon":this._iconTemplate=e.template;break;case"rejecticon":this._rejectIconTemplate=e.template;break;case"accepticon":this._acceptIconTemplate=e.template;break;case"headless":this._headlessTemplate=e.template;break}})}getAriaLabelledBy(){return this.header!==null?Te("pn_id_")+"_header":null}option(e,n){let o=this;if(o.hasOwnProperty(e))return n?o[n]:o[e]}getButtonStyleClass(e,n){let o=this.cx(e),l=this.option(n);return[o,l].filter(Boolean).join(" ")}getElementToFocus(){if(this.dialog?.el?.nativeElement)switch(this.option("defaultFocus")){case"accept":return G(this.dialog.el.nativeElement,".p-confirm-dialog-accept");case"reject":return G(this.dialog.el.nativeElement,".p-confirm-dialog-reject");case"close":return G(this.dialog.el.nativeElement,".p-dialog-header-close");case"none":return null;default:return G(this.dialog.el.nativeElement,".p-confirm-dialog-accept")}}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",Ee(this.styleElement,"nonce",this.config?.csp()?.nonce),this.document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`
                    @media screen and (max-width: ${n}) {
                        .p-dialog[${this.id}] {
                            width: ${this.breakpoints[n]} !important;
                        }
                    }
                `;this.styleElement.innerHTML=e,Ee(this.styleElement,"nonce",this.config?.csp()?.nonce)}}close(){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(A.CANCEL),this.hide(A.CANCEL)}hide(e){this.onHide.emit(e),this.visible=!1,this.unsubscribeConfirmationEvents(),this.confirmation=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.subscription.unsubscribe(),this.unsubscribeConfirmationEvents(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle(),super.ngOnDestroy()}onVisibleChange(e){e?this.visible=e:this.close()}onAccept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(A.ACCEPT)}onReject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(A.REJECT),this.hide(A.REJECT)}unsubscribeConfirmationEvents(){this.confirmation&&(this.confirmation.acceptEvent?.unsubscribe(),this.confirmation.rejectEvent?.unsubscribe())}get acceptButtonLabel(){return this.option("acceptLabel")||this.getAcceptButtonProps()?.label||this.config.getTranslation(Ie.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.getRejectButtonProps()?.label||this.config.getTranslation(Ie.REJECT)}getAcceptButtonProps(){return this.option("acceptButtonProps")}getRejectButtonProps(){return this.option("rejectButtonProps")}static \u0275fac=function(n){return new(n||t)(u(B),u(ze))};static \u0275cmp=C({type:t,selectors:[["p-confirmDialog"],["p-confirmdialog"],["p-confirm-dialog"]],contentQueries:function(n,o,l){if(n&1&&(S(l,Je,5),S(l,Dt,4),S(l,jt,4),S(l,Lt,4),S(l,At,4),S(l,Bt,4),S(l,Vt,4),S(l,Nt,4),S(l,j,4)),n&2){let _;w(_=E())&&(o.footer=_.first),w(_=E())&&(o.headerTemplate=_.first),w(_=E())&&(o.footerTemplate=_.first),w(_=E())&&(o.rejectIconTemplate=_.first),w(_=E())&&(o.acceptIconTemplate=_.first),w(_=E())&&(o.messageTemplate=_.first),w(_=E())&&(o.iconTemplate=_.first),w(_=E())&&(o.headlessTemplate=_.first),w(_=E())&&(o.templates=_)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",closeAriaLabel:"closeAriaLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:[2,"acceptVisible","acceptVisible",O],rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:[2,"rejectVisible","rejectVisible",O],acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:[2,"closeOnEscape","closeOnEscape",O],dismissableMask:[2,"dismissableMask","dismissableMask",O],blockScroll:[2,"blockScroll","blockScroll",O],rtl:[2,"rtl","rtl",O],closable:[2,"closable","closable",O],appendTo:"appendTo",key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",O],baseZIndex:[2,"baseZIndex","baseZIndex",qe],transitionOptions:"transitionOptions",focusTrap:[2,"focusTrap","focusTrap",O],defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position",draggable:[2,"draggable","draggable",O]},outputs:{onHide:"onHide"},features:[te([bt]),He],ngContentSelectors:Rt,decls:6,vars:16,consts:[["dialog",""],["footer",""],["headless",""],["content",""],["header",""],["icon",""],["role","alertdialog",3,"visibleChange","visible","closable","styleClass","modal","header","closeOnEscape","blockScroll","appendTo","position","dismissableMask","draggable","baseZIndex","autoZIndex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[3,"ngClass","class"],[3,"class","innerHTML"],[3,"ngClass","class",4,"ngIf"],[3,"ngClass"],[3,"innerHTML"],[3,"label","styleClass","ariaLabel","buttonProps","onClick",4,"ngIf"],[3,"onClick","label","styleClass","ariaLabel","buttonProps"],[3,"class"],[3,"class",4,"ngIf"]],template:function(n,o){if(n&1){let l=F();X(zt),a(0,"p-dialog",6,0),g("visibleChange",function(Pt){return y(l),x(o.onVisibleChange(Pt))}),T(2,Zt,2,0)(3,ri,3,1),m(4,Mi,2,2,"ng-template",null,1,L),r()}n&2&&(ee(o.style),s("visible",o.visible)("closable",o.option("closable"))("styleClass",o.cn(o.cx("root"),o.styleClass))("modal",!0)("header",o.option("header"))("closeOnEscape",o.option("closeOnEscape"))("blockScroll",o.option("blockScroll"))("appendTo",o.option("appendTo"))("position",o.position)("dismissableMask",o.dismissableMask)("draggable",o.draggable)("baseZIndex",o.baseZIndex)("autoZIndex",o.autoZIndex),c(2),I(o.headlessTemplate||o._headlessTemplate?2:3))},dependencies:[M,Ze,D,Ue,st,Ce,ae],encapsulation:2,data:{animation:[$e("animation",[Oe("void => visible",[we(xi)]),Oe("visible => void",[we(Oi)])])]},changeDetection:0})}return t})(),Ct=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Re({type:t});static \u0275inj=je({imports:[De,ae,ae]})}return t})();var wi=["*"],Ei=t=>({width:"90vw",maxWidth:t});function Ti(t,i){if(t&1&&(a(0,"div",2)(1,"h2",3),d(2),r()()),t&2){let e=p();c(2),k(e.title)}}var Z=class t{visible=!1;title="";width="600px";closable=!0;visibleChange=new b;onHide=new b;handleHide(){this.visible=!1,this.visibleChange.emit(!1),this.onHide.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-dialog"]],inputs:{visible:"visible",title:"title",width:"width",closable:"closable"},outputs:{visibleChange:"visibleChange",onHide:"onHide"},ngContentSelectors:wi,decls:3,vars:9,consts:[["styleClass","app-custom-dialog",3,"visibleChange","onHide","visible","modal","closable","draggable","resizable"],["pTemplate","header"],[1,"dialog-header"],[1,"dialog-title"]],template:function(e,n){e&1&&(X(),a(0,"p-dialog",0),v("visibleChange",function(l){return P(n.visible,l)||(n.visible=l),l}),g("onHide",function(){return n.handleHide()}),m(1,Ti,3,1,"ng-template",1),Y(2),r()),e&2&&(ee(ne(7,Ei,n.width)),h("visible",n.visible),s("modal",!0)("closable",n.closable)("draggable",!1)("resizable",!1))},dependencies:[M,pt,Ce,j],styles:["[_nghost-%COMP%]     .app-custom-dialog.p-dialog, [_nghost-%COMP%]     .p-dialog.app-custom-dialog{border-radius:12px!important;box-shadow:0 10px 40px #0d2a724d!important;overflow:visible!important;border:none!important;background:#fff!important}[_nghost-%COMP%]     .app-custom-dialog.p-dialog .p-dialog-header, [_nghost-%COMP%]     .p-dialog.app-custom-dialog .p-dialog-header{background:#fff!important;padding:1.5rem!important;border:none!important;border-bottom:2px solid #e5e7eb!important;border-radius:12px 12px 0 0!important;margin:0!important}[_nghost-%COMP%]     .app-custom-dialog.p-dialog .p-dialog-header .dialog-header, [_nghost-%COMP%]     .p-dialog.app-custom-dialog .p-dialog-header .dialog-header{display:flex;align-items:center;width:100%}[_nghost-%COMP%]     .app-custom-dialog.p-dialog .p-dialog-header .dialog-title, [_nghost-%COMP%]     .p-dialog.app-custom-dialog .p-dialog-header .dialog-title{font-size:1.25rem;font-weight:700;color:#0d2a72!important;margin:0}[_nghost-%COMP%]     .app-custom-dialog.p-dialog .p-dialog-header .p-dialog-header-icon, [_nghost-%COMP%]     .p-dialog.app-custom-dialog .p-dialog-header .p-dialog-header-icon{color:#6b7280!important}[_nghost-%COMP%]     .app-custom-dialog.p-dialog .p-dialog-header .p-dialog-header-icon:hover, [_nghost-%COMP%]     .p-dialog.app-custom-dialog .p-dialog-header .p-dialog-header-icon:hover{background:#f3f4f6!important;color:#0d2a72!important}[_nghost-%COMP%]     .app-custom-dialog.p-dialog .p-dialog-header .p-dialog-header-icon:focus, [_nghost-%COMP%]     .p-dialog.app-custom-dialog .p-dialog-header .p-dialog-header-icon:focus{box-shadow:none!important}[_nghost-%COMP%]     .app-custom-dialog.p-dialog .p-dialog-content, [_nghost-%COMP%]     .p-dialog.app-custom-dialog .p-dialog-content{padding:2rem!important;background:#fff!important;border:none!important;border-radius:0 0 12px 12px!important;margin:0!important}"]})};var Ii=()=>[10,25,50];function Fi(t,i){if(t&1&&(a(0,"div",25),f(1,"p-message",26),r()),t&2){let e=p();c(),s("severity",e.message.severity)("text",e.message.text)}}function ki(t,i){t&1&&(a(0,"tr")(1,"th",27),d(2,"Nombre "),f(3,"p-sortIcon",28),r(),a(4,"th",29),d(5,"Sede "),f(6,"p-sortIcon",30),r(),a(7,"th",31),d(8,"Acciones"),r()())}function Di(t,i){if(t&1){let e=F();a(0,"tr")(1,"td"),d(2),r(),a(3,"td"),d(4),r(),a(5,"td",32)(6,"app-button",33),g("onClick",function(){let o=y(e).$implicit,l=p();return x(l.onEdit(o))}),r(),a(7,"app-button",34),g("onClick",function(){let o=y(e).$implicit,l=p();return x(l.onDelete(o))}),r()()()}if(t&2){let e=i.$implicit;c(2),k(e.nombre),c(2),k((e.sede==null?null:e.sede.nombre)||"-"),c(2),s("rounded",!0)("iconOnly",!0),c(),s("rounded",!0)("iconOnly",!0)}}function ji(t,i){if(t&1&&(a(0,"tr")(1,"td",35),f(2,"i",36),d(3),r()()),t&2){let e=p();c(3),We(" ",e.selectedSede?"No hay edificios en esta sede":"A\xFAn no registras edificios"," ")}}var Me=class t{constructor(i,e,n){this.edificioService=i;this.sedeService=e;this.confirmationService=n}edificios=[];sedes=[];selectedSede=null;loading=!1;showForm=!1;editMode=!1;message=null;edificioForm={nombre:"",sedeId:""};ngOnInit(){this.loadSedes(),this.loadEdificios()}loadSedes(){this.sedeService.getSedes().subscribe({next:i=>{this.sedes=i},error:i=>{this.showMessage("error","Error al cargar las sedes")}})}loadEdificios(){this.loading=!0;let i=this.selectedSede?.id;this.edificioService.getAll(i).subscribe({next:e=>{this.edificios=e,this.loading=!1},error:e=>{this.showMessage("error","Error al cargar los edificios"),this.loading=!1}})}onSedeChange(){this.loadEdificios()}onAdd(){this.editMode=!1,this.edificioForm={nombre:"",sedeId:this.selectedSede?.id||""},this.showForm=!0}onEdit(i){this.editMode=!0,this.edificioForm={id:i.id,nombre:i.nombre,sedeId:i.sedeId},this.showForm=!0}onDelete(i){this.confirmationService.confirm({message:`\xBFEst\xE1 seguro de eliminar el edificio "${i.nombre}"?`,header:"Confirmar eliminaci\xF3n",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xED, eliminar",rejectLabel:"Cancelar",accept:()=>{this.edificioService.delete(i.id).subscribe({next:()=>{this.showMessage("success","Edificio eliminado correctamente"),this.loadEdificios()},error:e=>{this.showMessage("error",e.error?.message||"Error al eliminar el edificio")}})}})}onSave(){if(!this.edificioForm.nombre.trim()){this.showMessage("warn","El nombre del edificio es requerido");return}if(!this.edificioForm.sedeId){this.showMessage("warn","Debe seleccionar una sede");return}if(this.editMode&&this.edificioForm.id){let i={nombre:this.edificioForm.nombre,sedeId:this.edificioForm.sedeId};this.edificioService.update(this.edificioForm.id,i).subscribe({next:()=>{this.showMessage("success","Edificio actualizado correctamente"),this.showForm=!1,this.loadEdificios()},error:e=>{this.showMessage("error",e.error?.message||"Error al actualizar el edificio")}})}else{let i={nombre:this.edificioForm.nombre,sedeId:this.edificioForm.sedeId};this.edificioService.create(i).subscribe({next:()=>{this.showMessage("success","Edificio creado correctamente"),this.showForm=!1,this.loadEdificios()},error:e=>{this.showMessage("error",e.error?.message||"Error al crear el edificio")}})}}onCancel(){this.showForm=!1,this.edificioForm={nombre:"",sedeId:""}}showMessage(i,e){this.message={severity:i,text:e},setTimeout(()=>{this.message=null},5e3)}static \u0275fac=function(e){return new(e||t)(u(be),u(ue),u(B))};static \u0275cmp=C({type:t,selectors:[["app-edificio-management"]],features:[te([B])],decls:34,vars:18,consts:[[1,"edificio-management","p-4"],["class","mb-4",4,"ngIf"],["filters","",1,"filter-group"],["for","sedeFilter"],["id","sedeFilter","optionLabel","nombre","placeholder","Todas las sedes",3,"ngModelChange","onChange","ngModel","options","showClear"],["actions",""],["label","Nuevo edificio","variant","success","icon","pi pi-plus",3,"onClick","disabled"],[3,"visibleChange","onHide","visible","title","width"],[1,"edificio-form"],[1,"grid"],[1,"col-12","md:col-6"],["for","edificioNombre",1,"block","text-sm","font-semibold","mb-2",2,"color","#1f2937"],[1,"text-red-500"],["id","edificioNombre","type","text","pInputText","","placeholder","Ej: Edificio A",1,"w-full",3,"ngModelChange","ngModel"],["for","edificioSede",1,"block","text-sm","font-semibold","mb-2",2,"color","#1f2937"],["id","edificioSede","optionLabel","nombre","optionValue","id","placeholder","Seleccionar sede","styleClass","w-full",3,"ngModelChange","ngModel","options"],[1,"button-container"],["label","Cancelar","variant","secondary","icon","pi pi-times",3,"onClick"],["label","Guardar","variant","primary","icon","pi pi-check",3,"onClick"],[1,"shadow-1"],[1,"table-container"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} edificios","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","loading","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"mb-4"],["styleClass","w-full",3,"severity","text"],["pSortableColumn","nombre",1,"text-sm","text-500","uppercase"],["field","nombre"],["pSortableColumn","sede.nombre",1,"text-sm","text-500","uppercase"],["field","sede.nombre"],[1,"text-center","text-sm","text-500","uppercase"],[1,"text-center"],["icon","pi pi-pencil","variant","info","tooltip","Editar",3,"onClick","rounded","iconOnly"],["icon","pi pi-trash","variant","danger","tooltip","Eliminar",3,"onClick","rounded","iconOnly"],["colspan","3",1,"text-center","py-6","text-500"],[1,"pi","pi-inbox","text-4xl","mb-3","block"]],template:function(e,n){e&1&&(a(0,"div",0),m(1,Fi,2,2,"div",1),a(2,"app-filter-bar")(3,"div",2)(4,"label",3),d(5,"Filtrar por sede"),r(),a(6,"p-select",4),v("ngModelChange",function(l){return P(n.selectedSede,l)||(n.selectedSede=l),l}),g("onChange",function(){return n.onSedeChange()}),r()(),a(7,"div",5)(8,"app-button",6),g("onClick",function(){return n.onAdd()}),r()()(),a(9,"app-dialog",7),v("visibleChange",function(l){return P(n.showForm,l)||(n.showForm=l),l}),g("onHide",function(){return n.onCancel()}),a(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),d(14," Nombre "),a(15,"span",12),d(16,"*"),r()(),a(17,"input",13),v("ngModelChange",function(l){return P(n.edificioForm.nombre,l)||(n.edificioForm.nombre=l),l}),r()(),a(18,"div",10)(19,"label",14),d(20," Sede "),a(21,"span",12),d(22,"*"),r()(),a(23,"p-select",15),v("ngModelChange",function(l){return P(n.edificioForm.sedeId,l)||(n.edificioForm.sedeId=l),l}),r()()(),a(24,"div",16)(25,"app-button",17),g("onClick",function(){return n.onCancel()}),r(),a(26,"app-button",18),g("onClick",function(){return n.onSave()}),r()()()(),a(27,"p-card",19)(28,"div",20)(29,"p-table",21),m(30,ki,9,0,"ng-template",22)(31,Di,8,6,"ng-template",23)(32,ji,4,1,"ng-template",24),r()()(),f(33,"p-confirmDialog"),r()),e&2&&(c(),s("ngIf",n.message),c(5),h("ngModel",n.selectedSede),s("options",n.sedes)("showClear",!0),c(2),s("disabled",n.showForm),c(),h("visible",n.showForm),s("title",n.editMode?"Editar Edificio":"Nuevo Edificio")("width","600px"),c(8),h("ngModel",n.edificioForm.nombre),c(6),h("ngModel",n.edificioForm.sedeId),s("options",n.sedes),c(6),s("value",n.edificios)("loading",n.loading)("paginator",!0)("rows",10)("rowsPerPageOptions",ie(17,Ii))("showCurrentPageReport",!0))},dependencies:[M,D,se,re,V,le,lt,rt,j,_e,me,ge,fe,N,pe,ce,W,H,R,z,Ct,De,de,Q,ct,Z],styles:[".edificio-management[_ngcontent-%COMP%]{padding:0}.edificio-management[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.edificio-management[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#333}.edificio-management[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]     .p-select{width:100%;min-width:300px}.edificio-management[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:var(--surface-card);padding:clamp(1rem,3vw,1.5rem);border-radius:8px;border:1px solid var(--surface-border);box-shadow:0 2px 4px #0000001a}.edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#1f2937;font-weight:600}.edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   .p-select[_ngcontent-%COMP%], .edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   input[pInputText][_ngcontent-%COMP%]{border:2px solid #e5e7eb;transition:all .2s ease}.edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   .p-select[_ngcontent-%COMP%]:focus, .edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   .p-select[_ngcontent-%COMP%]:focus-within, .edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   input[pInputText][_ngcontent-%COMP%]:focus, .edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   input[pInputText][_ngcontent-%COMP%]:focus-within{border-color:#0d2a72;box-shadow:0 0 0 .2rem #0d2a7226}.edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.edificio-management[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{margin-top:clamp(.75rem,2vw,1rem)}.edificio-management[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:clamp(2rem,5vw,3rem);color:#999}.edificio-management[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0;font-size:var(--text-base)}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-header{background:#f8f9fa;border:1px solid #e9ecef;padding:1rem;font-weight:var(--font-semibold)}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background-color:#0d2a72;color:#fff;border:1px solid #0a1f54;padding:1rem;font-weight:var(--font-semibold);font-size:var(--text-sm);text-align:left}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th.text-center{text-align:center}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th .p-sortable-column-icon{color:#fff;margin-left:.5rem}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th:hover{background-color:#0f3085}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr{transition:background-color .2s ease}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:nth-child(2n){background-color:#f8f9fa}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:#e9ecef}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{border:1px solid #e9ecef;padding:.875rem 1rem;font-size:var(--text-sm);color:#495057}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td.text-center{text-align:center}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td.actions-cell{display:flex;gap:.5rem;justify-content:center;align-items:center}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td.empty-message{border:none;padding:0}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator{background:#f8f9fa;border:1px solid #e9ecef;padding:.5rem 1rem}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-current{color:#495057;font-size:var(--text-sm)}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2.5rem;height:2.5rem;border-radius:4px;color:#495057}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page.p-highlight{background-color:#0d2a72;border-color:#0d2a72;color:#fff}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page:hover:not(.p-highlight){background-color:#e9ecef}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-dropdown{border-color:#ced4da}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-dropdown:hover{border-color:#0d2a72}.edificio-management[_ngcontent-%COMP%]     .p-dropdown{width:100%}.edificio-management[_ngcontent-%COMP%]     .p-inputtext{width:100%;font-size:clamp(.75rem,1.8vw,.875rem)}.edificio-management[_ngcontent-%COMP%]     .p-inputgroup{flex-wrap:wrap;gap:.5rem}@media (max-width: 768px){.edificio-management[_ngcontent-%COMP%]{padding:.75rem}.edificio-management[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]     .p-select{min-width:200px}.edificio-management[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:1rem}.edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex-direction:column}.edificio-management[_ngcontent-%COMP%]   .edificio-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{width:100%}.edificio-management[_ngcontent-%COMP%]     .p-datatable{font-size:var(--text-xs)}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.75rem .5rem;font-size:var(--text-xs)}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.625rem .5rem;font-size:var(--text-xs)}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td.actions-cell{flex-wrap:wrap}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator{padding:.5rem;font-size:var(--text-xs)}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2rem;height:2rem}.edificio-management[_ngcontent-%COMP%]     .p-inputtext, .edificio-management[_ngcontent-%COMP%]     .p-dropdown{font-size:.875rem}}@media (max-width: 480px){.edificio-management[_ngcontent-%COMP%]{padding:.5rem}.edificio-management[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:.75rem}.edificio-management[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{margin-top:.75rem}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.5rem .25rem}.edificio-management[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.5rem .25rem}.edificio-management[_ngcontent-%COMP%]     .p-inputtext, .edificio-management[_ngcontent-%COMP%]     .p-dropdown{font-size:.8rem}.edificio-management[_ngcontent-%COMP%]     .p-inputgroup{flex-direction:column}.edificio-management[_ngcontent-%COMP%]     .p-inputgroup .p-button{width:100%}}"]})};var ye=class t{constructor(i){this.http=i}apiUrl=`${Xe.apiUrl}/pilas`;getAll(){return this.http.get(this.apiUrl)}getOne(i){return this.http.get(`${this.apiUrl}/${i}`)}create(i){return this.http.post(this.apiUrl,i)}update(i,e){return this.http.patch(`${this.apiUrl}/${i}`,e)}delete(i){return this.http.delete(`${this.apiUrl}/${i}`)}static \u0275fac=function(e){return new(e||t)(Le(Ge))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})};function Ai(t,i){if(t&1&&(a(0,"div",7),f(1,"p-message",8),r()),t&2){let e=p();c(),s("severity",e.message.severity)("text",e.message.text)}}var ht=class t{constructor(i){this.pilaService=i}pilas=[];selectedPila=null;showForm=!1;loading=!1;message=null;ngOnInit(){this.loadPilas()}loadPilas(){this.loading=!0,this.pilaService.getAll().subscribe({next:i=>{this.pilas=i,this.loading=!1},error:i=>{this.showMessage("error","Error al cargar las pilas"),this.loading=!1}})}onAdd(){this.selectedPila=null,this.showForm=!0}onEdit(i){this.selectedPila=i,this.showForm=!0}onDelete(i){this.pilaService.delete(i.id).subscribe({next:()=>{this.showMessage("success","Pila eliminada correctamente"),this.loadPilas()},error:e=>{this.showMessage("error",e.error?.message||"Error al eliminar la pila")}})}onSave(i){this.selectedPila?this.pilaService.update(this.selectedPila.id,i).subscribe({next:()=>{this.showMessage("success","Pila actualizada correctamente"),this.showForm=!1,this.selectedPila=null,this.loadPilas()},error:e=>{this.showMessage("error",e.error?.message||"Error al actualizar la pila")}}):this.pilaService.create(i).subscribe({next:()=>{this.showMessage("success","Pila creada correctamente"),this.showForm=!1,this.loadPilas()},error:e=>{this.showMessage("error",e.error?.message||"Error al crear la pila")}})}onCancel(){this.showForm=!1,this.selectedPila=null}showMessage(i,e){this.message={severity:i,text:e},setTimeout(()=>{this.message=null},5e3)}static \u0275fac=function(e){return new(e||t)(u(ye))};static \u0275cmp=C({type:t,selectors:[["app-location-page"]],decls:12,vars:7,consts:[[1,"location-management-page"],["class","mb-4",4,"ngIf"],[1,"management-section"],[1,"section-title"],[3,"visibleChange","onHide","visible","title","width"],[3,"save","cancel","pila"],[3,"add","edit","delete","pilas","loading"],[1,"mb-4"],["styleClass","w-full",3,"severity","text"]],template:function(e,n){e&1&&(a(0,"div",0),m(1,Ai,2,2,"div",1),a(2,"section",2)(3,"h2",3),d(4,"Gesti\xF3n de Edificios"),r(),f(5,"app-edificio-management"),r(),a(6,"section",2)(7,"h2",3),d(8,"Gesti\xF3n de Pilas de Reciclaje"),r(),a(9,"app-dialog",4),v("visibleChange",function(l){return P(n.showForm,l)||(n.showForm=l),l}),g("onHide",function(){return n.onCancel()}),a(10,"app-pila-form",5),g("save",function(l){return n.onSave(l)})("cancel",function(){return n.onCancel()}),r()(),a(11,"app-pila-list",6),g("add",function(){return n.onAdd()})("edit",function(l){return n.onEdit(l)})("delete",function(l){return n.onDelete(l)}),r()()()),e&2&&(c(),s("ngIf",n.message),c(8),h("visible",n.showForm),s("title",n.selectedPila?"Editar Pila":"Nueva Pila")("width","600px"),c(),s("pila",n.selectedPila),c(),s("pilas",n.pilas)("loading",n.loading))},dependencies:[M,D,R,z,Z,he,ve,Me],styles:[".location-management-page[_ngcontent-%COMP%]{padding:clamp(1rem,2vw,1.5rem);max-width:1400px;margin:0 auto}.location-management-page[_ngcontent-%COMP%]   .management-section[_ngcontent-%COMP%]{margin-bottom:clamp(2rem,4vw,3rem)}.location-management-page[_ngcontent-%COMP%]   .management-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.location-management-page[_ngcontent-%COMP%]   .management-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:clamp(1.25rem,2.5vw,1.75rem);font-weight:700;color:#0d2a72;margin:0 0 clamp(1rem,2vw,1.5rem) 0;padding-bottom:.75rem;border-bottom:3px solid #0D2A72}@media (max-width: 768px){.location-management-page[_ngcontent-%COMP%]{padding:1rem}.location-management-page[_ngcontent-%COMP%]   .management-section[_ngcontent-%COMP%]{margin-bottom:2rem}.location-management-page[_ngcontent-%COMP%]   .management-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom-width:2px}}@media (max-width: 480px){.location-management-page[_ngcontent-%COMP%]{padding:.75rem}.location-management-page[_ngcontent-%COMP%]   .management-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.location-management-page[_ngcontent-%COMP%]   .management-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.125rem}}"]})};export{ht as LocationPageComponent};

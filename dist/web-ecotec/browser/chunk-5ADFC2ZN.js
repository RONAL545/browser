import{a as ve}from"./chunk-7F4KLB3X.js";import{a as me}from"./chunk-ADSAMHCS.js";import{a as _e}from"./chunk-EM3PZ2DS.js";import{a as ge,b as be,c as fe,e as Ce,h as Me,i as Pe,j as Oe,k as xe}from"./chunk-6CKB7PEI.js";import{h as he}from"./chunk-MD5RATJP.js";import{H as Rt,I as ue,a as le,f as ce,h as pe,n as de,p as $}from"./chunk-QRAL5O2C.js";import{B as oe,I as re,J as se,K as X,Q as It,T as tt,ca as kt,ra as ft,sa as Ft,y as Et,ya as H}from"./chunk-724CLJNZ.js";import{a as ht}from"./chunk-H7Z7H6FO.js";import{$a as g,$b as I,Aa as Tt,Ab as v,Ac as bt,Bb as l,Cb as b,Dc as J,Ec as Dt,Fb as G,Fc as ut,Ga as st,Gb as Z,Hb as Y,Ib as V,Jb as D,K as q,L as E,La as h,M as $t,Ma as Ut,Oa as N,P as Qt,Pa as qt,Q as x,Qa as u,Ub as te,V as at,W as ot,Wa as w,X as St,Xa as B,Ya as z,Yb as M,Zb as ee,ab as o,ac as ne,bb as r,bc as mt,ca as rt,cb as d,ea as R,ec as F,fa as y,fc as ie,ha as Wt,ib as lt,jb as ct,kb as Gt,lb as O,nb as f,ob as A,pb as L,qb as pt,qc as ae,rb as K,rc as j,sb as S,tb as T,tc as gt,ub as Zt,va as c,vb as Yt,wb as Jt,wc as C,xb as Xt,zb as dt}from"./chunk-YLSQQ73F.js";import"./chunk-4CLCTAJ7.js";var Ct=class e{constructor(a){this.http=a}filterChange=new Tt;exportClick=new Tt;startDate=null;endDate=null;selectedSede=null;selectedEdificio=null;sedes=[];edificios=[];edificiosFiltrados=[];apiUrl=ht.apiUrl;ngOnInit(){this.loadSedes(),this.loadEdificios(),this.onFilter()}loadSedes(){let a=localStorage.getItem("access_token"),t=new J({Authorization:`Bearer ${a}`});this.http.get(`${this.apiUrl}/sedes`,{headers:t}).subscribe({next:n=>{this.sedes=n},error:n=>{}})}loadEdificios(){let a=localStorage.getItem("access_token"),t=new J({Authorization:`Bearer ${a}`});this.http.get(`${this.apiUrl}/edificios`,{headers:t}).subscribe({next:n=>{this.edificios=n,this.edificiosFiltrados=n},error:n=>{}})}onSedeChange(){this.selectedSede?(this.edificiosFiltrados=this.edificios.filter(a=>a.sedeId===this.selectedSede.id),this.selectedEdificio=null):this.edificiosFiltrados=this.edificios}onFilter(){let a={startDate:this.startDate?this.startDate.toISOString().split("T")[0]:void 0,endDate:this.endDate?this.endDate.toISOString().split("T")[0]:void 0,sedeId:this.selectedSede?.id,edificioId:this.selectedEdificio?.id};this.filterChange.emit(a)}onClear(){this.startDate=null,this.endDate=null,this.selectedSede=null,this.selectedEdificio=null,this.edificiosFiltrados=this.edificios,this.onFilter()}onExport(){this.exportClick.emit()}static \u0275fac=function(t){return new(t||e)(st(ut))};static \u0275cmp=h({type:e,selectors:[["app-report-filters"]],outputs:{filterChange:"filterChange",exportClick:"exportClick"},decls:22,vars:13,consts:[["filters","",1,"filters-grid"],[1,"filter-group"],["for","sede"],["id","sede","optionLabel","nombre","optionValue","id","placeholder","Todas las sedes","styleClass","w-full filter-input",3,"ngModelChange","onChange","ngModel","options","showClear"],["for","edificio"],["id","edificio","optionLabel","nombre","optionValue","id","placeholder","Todos los edificios","styleClass","w-full filter-input",3,"ngModelChange","ngModel","options","showClear","disabled"],["for","startDate"],["id","startDate","placeholder","dd/mm/aaaa","dateFormat","dd/mm/yy","appendTo","body","styleClass","w-full filter-input",3,"ngModelChange","ngModel","showIcon","showClear"],["for","endDate"],["id","endDate","placeholder","dd/mm/aaaa","dateFormat","dd/mm/yy","appendTo","body","styleClass","w-full filter-input",3,"ngModelChange","ngModel","showIcon","showClear"],["actions",""],["label","Limpiar","variant","secondary","icon","pi pi-filter-slash",3,"onClick"],["label","Aplicar Filtros","variant","primary","icon","pi pi-search",3,"onClick"],["label","Exportar Excel","variant","success","icon","pi pi-file-excel",3,"onClick"]],template:function(t,n){t&1&&(o(0,"app-filter-bar")(1,"div",0)(2,"div",1)(3,"label",2),l(4,"Sede"),r(),o(5,"p-select",3),Y("ngModelChange",function(s){return Z(n.selectedSede,s)||(n.selectedSede=s),s}),O("onChange",function(){return n.onSedeChange()}),r()(),o(6,"div",1)(7,"label",4),l(8,"Edificio"),r(),o(9,"p-select",5),Y("ngModelChange",function(s){return Z(n.selectedEdificio,s)||(n.selectedEdificio=s),s}),r()(),o(10,"div",1)(11,"label",6),l(12,"Fecha Inicio"),r(),o(13,"p-datepicker",7),Y("ngModelChange",function(s){return Z(n.startDate,s)||(n.startDate=s),s}),r()(),o(14,"div",1)(15,"label",8),l(16,"Fecha Fin"),r(),o(17,"p-datepicker",9),Y("ngModelChange",function(s){return Z(n.endDate,s)||(n.endDate=s),s}),r()()(),o(18,"div",10)(19,"app-button",11),O("onClick",function(){return n.onClear()}),r(),o(20,"app-button",12),O("onClick",function(){return n.onFilter()}),r(),o(21,"app-button",13),O("onClick",function(){return n.onExport()}),r()()()),t&2&&(c(5),G("ngModel",n.selectedSede),g("options",n.sedes)("showClear",!0),c(4),G("ngModel",n.selectedEdificio),g("options",n.edificiosFiltrados)("showClear",!0)("disabled",!n.selectedSede),c(4),G("ngModel",n.startDate),g("showIcon",!0)("showClear",!0),c(4),G("ngModel",n.endDate),g("showIcon",!0)("showClear",!0))},dependencies:[C,de,ce,pe,fe,he,Ce,_e],encapsulation:2})};function ze(e,a){if(e&1&&(o(0,"p",9),l(1),r()),e&2){let t=f().$implicit;c(),b(t.subtitle)}}function Ae(e,a){if(e&1&&(o(0,"p-card")(1,"div",3)(2,"div",4),d(3,"i"),r(),o(4,"div",5)(5,"h3",6),l(6),r(),o(7,"p",7),l(8),r(),u(9,ze,2,1,"p",8),r()()()),e&2){let t=a.$implicit;v("metric-card"),c(2),Xt("background-color",t.color),c(),v(t.icon),c(3),b(t.title),c(2),b(t.value),c(),g("ngIf",t.subtitle)}}var vt=class e{registros=[];metrics=[];ngOnChanges(a){a.registros&&this.registros&&this.calculateMetrics()}calculateMetrics(){let a=this.registros.length,t=0,n=0,i=0,s=0,p=0,_=0,m=0;this.registros.forEach(P=>{let k=Number(P.plasticosKg)||0,it=Number(P.organicosKg)||0,Lt=Number(P.vidrioKg)||0,Kt=Number(P.metalesKg)||0,Vt=Number(P.papelCartonKg)||0,jt=Number(P.botellasKg)||0,Ht=Number(P.papelOficinaKg)||0,Ne=Number(P.noAprovechablesKg)||0;t+=k+it+Lt+Kt+Vt+jt+Ht,n+=Ne,i+=k+jt,s+=Vt+Ht,p+=Lt,_+=it,m+=Kt});let nt=[{nombre:"Pl\xE1sticos",kg:i},{nombre:"Papel/Cart\xF3n",kg:s},{nombre:"Vidrio",kg:p},{nombre:"Org\xE1nicos",kg:_},{nombre:"Metales",kg:m}],U=nt.reduce((P,k)=>k.kg>P.kg?k:P,nt[0]),wt=t+n;this.metrics=[{title:"Total Registros",value:a.toString(),subtitle:"Formularios enviados",icon:"pi pi-file",color:"#3b82f6"},{title:"Total Residuos",value:`${wt.toFixed(2)} kg`,subtitle:"Total de todos los residuos",icon:"pi pi-box",color:"#6366f1"},{title:"Total Reciclados",value:`${t.toFixed(2)} kg`,subtitle:"Material aprovechable",icon:"pi pi-recycle",color:"#10b981"},{title:"Total No Aprovechable",value:`${n.toFixed(2)} kg`,subtitle:"Material no reciclable",icon:"pi pi-trash",color:"#ef4444"},{title:"M\xE1s Reciclado",value:U.nombre,subtitle:`${U.kg.toFixed(2)} kg`,icon:"pi pi-star",color:"#f59e0b"}]}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-report-metrics"]],inputs:{registros:"registros"},features:[R],decls:3,vars:1,consts:[[1,"report-metrics"],[1,"metrics-grid"],[3,"class",4,"ngFor","ngForOf"],[1,"metric-content"],[1,"metric-icon"],[1,"metric-info"],[1,"metric-title"],[1,"metric-value"],["class","metric-subtitle",4,"ngIf"],[1,"metric-subtitle"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),u(2,Ae,10,9,"p-card",2),r()()),t&2&&(c(2),g("ngForOf",n.metrics))},dependencies:[C,ae,j,me],styles:[".report-metrics[_ngcontent-%COMP%]{margin:2rem 0}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.5rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]     .p-card{height:100%;transition:transform .2s ease,box-shadow .2s ease;border-radius:12px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]     .p-card:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]     .p-card .p-card-body{padding:1.5rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]     .p-card .p-card-content{padding:0}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 2px 8px #00000026}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]{flex:1;min-width:0}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .metric-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#6b7280;margin:0 0 .5rem;text-transform:uppercase;letter-spacing:.025em}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1f2937;margin:0 0 .25rem;line-height:1.2;word-wrap:break-word}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .metric-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#9ca3af;margin:0}@media (max-width: 1200px){.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.25rem}}@media (max-width: 768px){.report-metrics[_ngcontent-%COMP%]{margin:1.5rem 0}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]     .p-card .p-card-body{padding:1.25rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{width:48px;height:48px}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.report-metrics[_ngcontent-%COMP%]{margin:1rem 0}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]{gap:.875rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]     .p-card .p-card-body{padding:1rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]{gap:.75rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{width:44px;height:44px}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .metric-title[_ngcontent-%COMP%]{font-size:.8125rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:1.25rem}.report-metrics[_ngcontent-%COMP%]   .metrics-grid[_ngcontent-%COMP%]   .metric-content[_ngcontent-%COMP%]   .metric-info[_ngcontent-%COMP%]   .metric-subtitle[_ngcontent-%COMP%]{font-size:.8125rem}}"]})};var Le=()=>({height:"400px"}),ye=()=>({height:"500px"});function Ke(e,a){if(e&1&&(o(0,"div",3)(1,"h3"),l(2,"Residuos por Sede"),r(),o(3,"div",4),d(4,"p-chart",7),r()()),e&2){let t=f(2);c(4),dt(D(4,ye)),g("data",t.barChartSedesData)("options",t.barChartSedesOptions)}}function Ve(e,a){if(e&1&&(o(0,"div",3)(1,"h3"),l(2,"Residuos por Edificio"),r(),o(3,"div",4),d(4,"p-chart",7),r()()),e&2){let t=f(2);c(4),dt(D(4,ye)),g("data",t.barChartEdificiosData)("options",t.barChartEdificiosOptions)}}function je(e,a){if(e&1&&(o(0,"div",1)(1,"h2"),l(2,"Resumen de Datos"),r(),o(3,"div",2)(4,"div",3)(5,"h3"),l(6,"Distribuci\xF3n de Residuos por Tipo"),r(),o(7,"div",4),d(8,"p-chart",5),r()(),u(9,Ke,5,5,"div",6)(10,Ve,5,5,"div",6),r()()),e&2){let t=f();c(8),dt(D(6,Le)),g("data",t.pieChartData)("options",t.pieChartOptions),c(),g("ngIf",t.showSedesChart&&(t.barChartSedesData==null||t.barChartSedesData.labels==null?null:t.barChartSedesData.labels.length)>0),c(),g("ngIf",(t.barChartEdificiosData==null||t.barChartEdificiosData.labels==null?null:t.barChartEdificiosData.labels.length)>0)}}function He(e,a){e&1&&(o(0,"div",1)(1,"p",8),l(2,"No hay datos disponibles. Aplica filtros para ver las estad\xEDsticas."),r()())}var Mt=class e{statistics=null;currentFilters={};showSedesChart=!0;pieChartData;pieChartOptions;barChartSedesData;barChartSedesOptions;barChartEdificiosData;barChartEdificiosOptions;ngOnChanges(a){a.statistics&&this.statistics&&this.updateCharts(),a.currentFilters&&(this.showSedesChart=!this.currentFilters.sedeId)}updateCharts(){if(!this.statistics)return;let a=this.statistics.totalesPorTipo,t=["Pl\xE1sticos","Org\xE1nicos","Vidrio","Metales","Papel y Cart\xF3n","No Aprovechables"],n=[a.plasticos+a.botellas,a.organicos,a.vidrio,a.metales,a.papelCarton+a.papelOficina,a.noAprovechables];this.pieChartData={labels:t,datasets:[{data:n,backgroundColor:["#f1e9e99c","#6f4e37","#808080","#ffeb00","#1c5efb","#000000"]}]},this.pieChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:m=>{let nt=m.label||"",U=m.parsed||0,wt=m.dataset.data.reduce((k,it)=>k+it,0),P=(U/wt*100).toFixed(2);return`${nt}: ${U.toFixed(2)} kg (${P}%)`}}}}};let i=Object.keys(this.statistics.totalesPorSede),s=[{label:"Pl\xE1sticos",backgroundColor:"#f1e9e99c",data:i.map(m=>(this.statistics.totalesPorSede[m]?.plasticos||0)+(this.statistics.totalesPorSede[m]?.botellas||0))},{label:"Org\xE1nicos",backgroundColor:"#6f4e37",data:i.map(m=>this.statistics.totalesPorSede[m]?.organicos||0)},{label:"Vidrio",backgroundColor:"#808080",data:i.map(m=>this.statistics.totalesPorSede[m]?.vidrio||0)},{label:"Metales",backgroundColor:"#ffeb00",data:i.map(m=>this.statistics.totalesPorSede[m]?.metales||0)},{label:"Papel y Cart\xF3n",backgroundColor:"#1c5efb",data:i.map(m=>(this.statistics.totalesPorSede[m]?.papelCarton||0)+(this.statistics.totalesPorSede[m]?.papelOficina||0))},{label:"No Aprovechables",backgroundColor:"#000000",data:i.map(m=>this.statistics.totalesPorSede[m]?.noAprovechables||0)}];this.barChartSedesData={labels:i,datasets:s},this.barChartSedesOptions={responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!1},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Kilogramos (kg)"}}},plugins:{legend:{position:"bottom",labels:{boxWidth:12,font:{size:11}}},title:{display:!1}},barPercentage:.9,categoryPercentage:.8};let p=Object.keys(this.statistics.totalesPorEdificio),_=[{label:"Pl\xE1sticos",backgroundColor:"#f1e9e99c",data:p.map(m=>(this.statistics.totalesPorEdificio[m]?.plasticos||0)+(this.statistics.totalesPorEdificio[m]?.botellas||0))},{label:"Org\xE1nicos",backgroundColor:"#6f4e37",data:p.map(m=>this.statistics.totalesPorEdificio[m]?.organicos||0)},{label:"Vidrio",backgroundColor:"#808080",data:p.map(m=>this.statistics.totalesPorEdificio[m]?.vidrio||0)},{label:"Metales",backgroundColor:"#ffeb00",data:p.map(m=>this.statistics.totalesPorEdificio[m]?.metales||0)},{label:"Papel y Cart\xF3n",backgroundColor:"#1c5efb",data:p.map(m=>(this.statistics.totalesPorEdificio[m]?.papelCarton||0)+(this.statistics.totalesPorEdificio[m]?.papelOficina||0))},{label:"No Aprovechables",backgroundColor:"#000000",data:p.map(m=>this.statistics.totalesPorEdificio[m]?.noAprovechables||0)}];this.barChartEdificiosData={labels:p,datasets:_},this.barChartEdificiosOptions={responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!1},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Kilogramos (kg)"}}},plugins:{legend:{position:"bottom",labels:{boxWidth:12,font:{size:11}}},title:{display:!1}},barPercentage:.9,categoryPercentage:.8}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-report-summary"]],inputs:{statistics:"statistics",currentFilters:"currentFilters"},features:[R],decls:2,vars:2,consts:[["class","report-summary",4,"ngIf"],[1,"report-summary"],[1,"charts-container"],[1,"chart-card"],[1,"chart-wrapper"],["type","pie",3,"data","options"],["class","chart-card",4,"ngIf"],["type","bar",3,"data","options"],[1,"no-data"]],template:function(t,n){t&1&&u(0,je,11,7,"div",0)(1,He,3,0,"div",0),t&2&&(g("ngIf",n.statistics),c(),g("ngIf",!n.statistics))},dependencies:[C,j,ve],styles:[".report-summary[_ngcontent-%COMP%]{margin-bottom:2rem}.report-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0d2a72;font-size:1.5rem;font-weight:600;margin-bottom:1.5rem}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;margin-top:2rem}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]{flex:1 1 calc(50% - 1rem);min-width:400px;background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000001a}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]:first-child{flex:1 1 100%}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0d2a72;font-size:1.25rem;font-weight:600;margin-bottom:1.5rem;text-align:center}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.report-summary[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#999;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}@media (max-width: 1024px){.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]{flex:1 1 100%;min-width:auto}}@media (max-width: 768px){.report-summary[_ngcontent-%COMP%]{margin-bottom:1.5rem}.report-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--text-lg)}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]{gap:1rem;margin-top:1.5rem}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]{min-width:100%;padding:1rem}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--text-sm)}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:300px!important}}@media (max-width: 480px){.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]{padding:.75rem}.report-summary[_ngcontent-%COMP%]   .charts-container[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:250px!important}}"]})};var we=`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
        overflow: hidden;
        background: dt('tabs.tablist.background');
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`;var $e=["previcon"],Qe=["nexticon"],ke=["content"],We=["prevButton"],Ue=["nextButton"],qe=["inkbar"],Ge=["tabs"],et=["*"];function Ze(e,a){e&1&&lt(0)}function Ye(e,a){if(e&1&&u(0,Ze,1,0,"ng-container",11),e&2){let t=f(2);g("ngTemplateOutlet",t.prevIconTemplate||t._prevIconTemplate)}}function Je(e,a){e&1&&(St(),d(0,"svg",10))}function Xe(e,a){if(e&1){let t=ct();o(0,"button",9,3),O("click",function(){at(t);let i=f();return ot(i.onPrevButtonClick())}),B(2,Ye,1,1,"ng-container")(3,Je,1,0,":svg:svg",10),r()}if(e&2){let t=f();v(t.cx("prevButton")),w("aria-label",t.prevButtonAriaLabel)("tabindex",t.tabindex())("data-pc-group-section","navigator"),c(2),z(t.prevIconTemplate||t._prevIconTemplate?2:3)}}function tn(e,a){e&1&&lt(0)}function en(e,a){if(e&1&&u(0,tn,1,0,"ng-container",11),e&2){let t=f(2);g("ngTemplateOutlet",t.nextIconTemplate||t._nextIconTemplate)}}function nn(e,a){e&1&&(St(),d(0,"svg",12))}function an(e,a){if(e&1){let t=ct();o(0,"button",9,4),O("click",function(){at(t);let i=f();return ot(i.onNextButtonClick())}),B(2,en,1,1,"ng-container")(3,nn,1,0,":svg:svg",12),r()}if(e&2){let t=f();v(t.cx("nextButton")),w("aria-label",t.nextButtonAriaLabel)("tabindex",t.tabindex())("data-pc-group-section","navigator"),c(2),z(t.nextIconTemplate||t._nextIconTemplate?2:3)}}function on(e,a){e&1&&L(0)}function rn(e,a){e&1&&lt(0)}function sn(e,a){if(e&1&&u(0,rn,1,0,"ng-container",1),e&2){let t=f(),n=Jt(1);g("ngTemplateOutlet",t.content()?t.content():n)}}var ln={root:({instance:e})=>["p-tabs p-component",{"p-tabs-scrollable":e.scrollable()}]},Se=(()=>{class e extends H{name="tabs";theme=we;classes=ln;static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275prov=E({token:e,factory:e.\u0275fac})}return e})();var cn={root:"p-tablist",content:"p-tablist-content p-tablist-viewport",tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},Te=(()=>{class e extends H{name="tablist";classes=cn;static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275prov=E({token:e,factory:e.\u0275fac})}return e})();var Pt=(()=>{class e extends ${prevIconTemplate;nextIconTemplate;templates;content;prevButton;nextButton;inkbar;tabs;pcTabs=x(q(()=>W));isPrevButtonEnabled=rt(!1);isNextButtonEnabled=rt(!1);resizeObserver;showNavigators=M(()=>this.pcTabs.showNavigators());tabindex=M(()=>this.pcTabs.tabindex());scrollable=M(()=>this.pcTabs.scrollable());_componentStyle=x(Te);constructor(){super(),ee(()=>{this.pcTabs.value(),bt(this.platformId)&&setTimeout(()=>{this.updateInkBar()})})}get prevButtonAriaLabel(){return this.config?.translation?.aria?.previous}get nextButtonAriaLabel(){return this.config?.translation?.aria?.next}ngAfterViewInit(){super.ngAfterViewInit(),this.showNavigators()&&bt(this.platformId)&&(this.updateButtonState(),this.bindResizeObserver())}_prevIconTemplate;_nextIconTemplate;ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"previcon":this._prevIconTemplate=t.template;break;case"nexticon":this._nextIconTemplate=t.template;break}})}ngOnDestroy(){this.unbindResizeObserver(),super.ngOnDestroy()}onScroll(t){this.showNavigators()&&this.updateButtonState(),t.preventDefault()}onPrevButtonClick(){let t=this.content.nativeElement,n=tt(t),i=Math.abs(t.scrollLeft)-n,s=i<=0?0:i;t.scrollLeft=Et(t)?-1*s:s}onNextButtonClick(){let t=this.content.nativeElement,n=tt(t)-this.getVisibleButtonWidths(),i=t.scrollLeft+n,s=t.scrollWidth-n,p=i>=s?s:i;t.scrollLeft=Et(t)?-1*p:p}updateButtonState(){let t=this.content?.nativeElement,n=this.el?.nativeElement,{scrollWidth:i,offsetWidth:s}=t,p=Math.abs(t.scrollLeft),_=tt(t);this.isPrevButtonEnabled.set(p!==0),this.isNextButtonEnabled.set(n.offsetWidth>=s&&Math.abs(p-i+_)>1)}updateInkBar(){let t=this.content?.nativeElement,n=this.inkbar?.nativeElement,i=this.tabs?.nativeElement,s=re(t,'[data-pc-name="tab"][data-p-active="true"]');n&&(n.style.width=oe(s)+"px",n.style.left=It(s).left-It(i).left+"px")}getVisibleButtonWidths(){let t=this.prevButton?.nativeElement,n=this.nextButton?.nativeElement;return[t,n].reduce((i,s)=>s?i+tt(s):i,0)}bindResizeObserver(){this.resizeObserver=new ResizeObserver(()=>this.updateButtonState()),this.resizeObserver.observe(this.el.nativeElement)}unbindResizeObserver(){this.resizeObserver&&(this.resizeObserver.unobserve(this.el.nativeElement),this.resizeObserver=null)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["p-tablist"]],contentQueries:function(n,i,s){if(n&1&&(pt(s,$e,4),pt(s,Qe,4),pt(s,ft,4)),n&2){let p;S(p=T())&&(i.prevIconTemplate=p.first),S(p=T())&&(i.nextIconTemplate=p.first),S(p=T())&&(i.templates=p)}},viewQuery:function(n,i){if(n&1&&(K(ke,5),K(We,5),K(Ue,5),K(qe,5),K(Ge,5)),n&2){let s;S(s=T())&&(i.content=s.first),S(s=T())&&(i.prevButton=s.first),S(s=T())&&(i.nextButton=s.first),S(s=T())&&(i.inkbar=s.first),S(s=T())&&(i.tabs=s.first)}},hostVars:3,hostBindings:function(n,i){n&2&&(w("data-pc-name","tablist"),v(i.cx("root")))},features:[V([Te]),N],ngContentSelectors:et,decls:9,vars:9,consts:[["content",""],["tabs",""],["inkbar",""],["prevButton",""],["nextButton",""],["type","button","pRipple","",3,"class"],[3,"scroll"],["role","tablist"],["role","presentation"],["type","button","pRipple","",3,"click"],["data-p-icon","chevron-left"],[4,"ngTemplateOutlet"],["data-p-icon","chevron-right"]],template:function(n,i){if(n&1){let s=ct();A(),B(0,Xe,4,6,"button",5),o(1,"div",6,0),O("scroll",function(_){return at(s),ot(i.onScroll(_))}),o(3,"div",7,1),L(5),d(6,"span",8,2),r()(),B(8,an,4,6,"button",5)}n&2&&(z(i.showNavigators()&&i.isPrevButtonEnabled()?0:-1),c(),v(i.cx("content")),c(2),v(i.cx("tabList")),c(3),v(i.cx("activeBar")),w("data-pc-section","inkbar"),c(2),z(i.showNavigators()&&i.isNextButtonEnabled()?8:-1))},dependencies:[C,gt,ge,be,ue,Rt,Ft],encapsulation:2,changeDetection:0})}return e})(),pn={root:({instance:e})=>["p-tab",{"p-tab-active":e.active(),"p-disabled":e.disabled()}]},De=(()=>{class e extends H{name="tab";classes=pn;static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275prov=E({token:e,factory:e.\u0275fac})}return e})();var Bt=(()=>{class e extends ${value=mt();disabled=I(!1,{transform:F});pcTabs=x(q(()=>W));pcTabList=x(q(()=>Pt));el=x(Wt);_componentStyle=x(De);ripple=M(()=>this.config.ripple());id=M(()=>`${this.pcTabs.id()}_tab_${this.value()}`);ariaControls=M(()=>`${this.pcTabs.id()}_tabpanel_${this.value()}`);active=M(()=>kt(this.pcTabs.value(),this.value()));tabindex=M(()=>this.disabled()?-1:this.active()?this.pcTabs.tabindex():-1);mutationObserver;onFocus(t){this.disabled()||this.pcTabs.selectOnFocus()&&this.changeActiveValue()}onClick(t){this.disabled()||this.changeActiveValue()}onKeyDown(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break;default:break}t.stopPropagation()}ngAfterViewInit(){super.ngAfterViewInit(),this.bindMutationObserver()}onArrowRightKey(t){let n=this.findNextTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onHomeKey(t),t.preventDefault()}onArrowLeftKey(t){let n=this.findPrevTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onEndKey(t),t.preventDefault()}onHomeKey(t){let n=this.findFirstTab();this.changeFocusedTab(t,n),t.preventDefault()}onEndKey(t){let n=this.findLastTab();this.changeFocusedTab(t,n),t.preventDefault()}onPageDownKey(t){this.scrollInView(this.findLastTab()),t.preventDefault()}onPageUpKey(t){this.scrollInView(this.findFirstTab()),t.preventDefault()}onEnterKey(t){this.disabled()||this.changeActiveValue(),t.preventDefault()}findNextTab(t,n=!1){let i=n?t:t.nextElementSibling;return i?X(i,"data-p-disabled")||X(i,"data-pc-section")==="inkbar"?this.findNextTab(i):i:null}findPrevTab(t,n=!1){let i=n?t:t.previousElementSibling;return i?X(i,"data-p-disabled")||X(i,"data-pc-section")==="inkbar"?this.findPrevTab(i):i:null}findFirstTab(){return this.findNextTab(this.pcTabList?.tabs?.nativeElement?.firstElementChild,!0)}findLastTab(){return this.findPrevTab(this.pcTabList?.tabs?.nativeElement?.lastElementChild,!0)}changeActiveValue(){this.pcTabs.updateValue(this.value())}changeFocusedTab(t,n){se(n),this.scrollInView(n)}scrollInView(t){t?.scrollIntoView?.({block:"nearest"})}bindMutationObserver(){bt(this.platformId)&&(this.mutationObserver=new MutationObserver(t=>{t.forEach(()=>{this.active()&&this.pcTabList?.updateInkBar()})}),this.mutationObserver.observe(this.el.nativeElement,{childList:!0,characterData:!0,subtree:!0}))}unbindMutationObserver(){this.mutationObserver?.disconnect()}ngOnDestroy(){this.mutationObserver&&this.unbindMutationObserver(),super.ngOnDestroy()}static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275cmp=h({type:e,selectors:[["p-tab"]],hostVars:11,hostBindings:function(n,i){n&1&&O("focus",function(p){return i.onFocus(p)})("click",function(p){return i.onClick(p)})("keydown",function(p){return i.onKeyDown(p)}),n&2&&(w("data-pc-name","tab")("id",i.id())("aria-controls",i.ariaControls())("role","tab")("aria-selected",i.active())("aria-disabled",i.disabled())("data-p-disabled",i.disabled())("data-p-active",i.active())("tabindex",i.tabindex()),v(i.cx("root")))},inputs:{value:[1,"value"],disabled:[1,"disabled"]},outputs:{value:"valueChange"},features:[V([De]),qt([Rt]),N],ngContentSelectors:et,decls:1,vars:0,template:function(n,i){n&1&&(A(),L(0))},dependencies:[C,Ft],encapsulation:2,changeDetection:0})}return e})(),dn={root:({instance:e})=>["p-tabpanel",{"p-tabpanel-active":e.active()}]},Ee=(()=>{class e extends H{name="tabpanel";classes=dn;static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275prov=E({token:e,factory:e.\u0275fac})}return e})();var Fe=(()=>{class e extends ${pcTabs=x(q(()=>W));lazy=I(!1,{transform:F});value=mt(void 0);content=ne("content");id=M(()=>`${this.pcTabs.id()}_tabpanel_${this.value()}`);ariaLabelledby=M(()=>`${this.pcTabs.id()}_tab_${this.value()}`);active=M(()=>kt(this.pcTabs.value(),this.value()));isLazyEnabled=M(()=>this.pcTabs.lazy()||this.lazy());hasBeenRendered=!1;shouldRender=M(()=>!this.isLazyEnabled()||this.hasBeenRendered?!0:this.active()?(this.hasBeenRendered=!0,!0):!1);_componentStyle=x(Ee);static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275cmp=h({type:e,selectors:[["p-tabpanel"]],contentQueries:function(n,i,s){n&1&&Zt(s,i.content,ke,5),n&2&&Yt()},hostVars:8,hostBindings:function(n,i){n&2&&(Gt("hidden",!i.active()),w("data-pc-name","tabpanel")("id",i.id())("role","tabpanel")("aria-labelledby",i.ariaLabelledby())("data-p-active",i.active()),v(i.cx("root")))},inputs:{lazy:[1,"lazy"],value:[1,"value"]},outputs:{value:"valueChange"},features:[V([Ee]),N],ngContentSelectors:et,decls:3,vars:1,consts:[["defaultContent",""],[4,"ngTemplateOutlet"]],template:function(n,i){n&1&&(A(),u(0,on,1,0,"ng-template",null,0,te),B(2,sn,1,1,"ng-container")),n&2&&(c(2),z(i.shouldRender()?2:-1))},dependencies:[gt],encapsulation:2,changeDetection:0})}return e})(),mn={root:"p-tabpanels"},Ie=(()=>{class e extends H{name="tabpanels";classes=mn;static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275prov=E({token:e,factory:e.\u0275fac})}return e})();var zt=(()=>{class e extends ${_componentStyle=x(Ie);static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275cmp=h({type:e,selectors:[["p-tabpanels"]],hostVars:4,hostBindings:function(n,i){n&2&&(w("data-pc-name","tabpanels")("role","presentation"),v(i.cx("root")))},features:[V([Ie]),N],ngContentSelectors:et,decls:1,vars:0,template:function(n,i){n&1&&(A(),L(0))},dependencies:[C],encapsulation:2,changeDetection:0})}return e})(),W=(()=>{class e extends ${value=mt(void 0);scrollable=I(!1,{transform:F});lazy=I(!1,{transform:F});selectOnFocus=I(!1,{transform:F});showNavigators=I(!0,{transform:F});tabindex=I(0,{transform:ie});id=rt(le("pn_id_"));_componentStyle=x(Se);updateValue(t){this.value.update(()=>t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=y(e)))(i||e)}})();static \u0275cmp=h({type:e,selectors:[["p-tabs"]],hostVars:4,hostBindings:function(n,i){n&2&&(w("data-pc-name","tabs")("id",i.id()),v(i.cx("root")))},inputs:{value:[1,"value"],scrollable:[1,"scrollable"],lazy:[1,"lazy"],selectOnFocus:[1,"selectOnFocus"],showNavigators:[1,"showNavigators"],tabindex:[1,"tabindex"]},outputs:{value:"valueChange"},features:[V([Se]),N],ngContentSelectors:et,decls:1,vars:0,template:function(n,i){n&1&&(A(),L(0))},dependencies:[C],encapsulation:2,changeDetection:0})}return e})(),Re=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=Ut({type:e});static \u0275inj=$t({imports:[W,zt,Pt,Bt]})}return e})();var At=()=>[10,25,50],bn=()=>["fecha","sede","edificio","registradoPor"];function un(e,a){e&1&&(o(0,"tr")(1,"th",10),l(2,"Fecha "),d(3,"p-sortIcon",11),r(),o(4,"th",12),l(5,"Sede "),d(6,"p-sortIcon",13),r(),o(7,"th",14),l(8,"Edificio "),d(9,"p-sortIcon",15),r(),o(10,"th",16),l(11,"Pl\xE1sticos (kg) "),d(12,"p-sortIcon",17),r(),o(13,"th",18),l(14,"Org\xE1nicos (kg) "),d(15,"p-sortIcon",19),r(),o(16,"th",20),l(17,"Vidrio (kg) "),d(18,"p-sortIcon",21),r(),o(19,"th",22),l(20,"Metales (kg) "),d(21,"p-sortIcon",23),r(),o(22,"th",24),l(23,"Papel y Cart\xF3n (kg) "),d(24,"p-sortIcon",25),r(),o(25,"th",26),l(26,"No Aprovechables (kg) "),d(27,"p-sortIcon",27),r(),o(28,"th",28),l(29,"Registrado Por "),d(30,"p-sortIcon",29),r()())}function fn(e,a){if(e&1&&(o(0,"tr")(1,"td"),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),l(8),r(),o(9,"td"),l(10),r(),o(11,"td"),l(12),r(),o(13,"td"),l(14),r(),o(15,"td"),l(16),r(),o(17,"td"),l(18),r(),o(19,"td"),l(20),r()()),e&2){let t=a.$implicit;c(2),b(t.fecha),c(2),b(t.sede),c(2),b(t.edificio),c(2),b((t.plasticos==null?null:t.plasticos.toFixed(2))||"0.00"),c(2),b((t.organicos==null?null:t.organicos.toFixed(2))||"0.00"),c(2),b((t.vidrio==null?null:t.vidrio.toFixed(2))||"0.00"),c(2),b((t.metales==null?null:t.metales.toFixed(2))||"0.00"),c(2),b((t.papelCarton==null?null:t.papelCarton.toFixed(2))||"0.00"),c(2),b((t.noAprovechables==null?null:t.noAprovechables.toFixed(2))||"0.00"),c(2),b(t.registradoPor)}}function hn(e,a){e&1&&(o(0,"tr")(1,"td",30),l(2,"No hay registros de pilas disponibles"),r()())}function Cn(e,a){e&1&&(o(0,"tr")(1,"th",10),l(2,"Fecha "),d(3,"p-sortIcon",11),r(),o(4,"th",12),l(5,"Sede "),d(6,"p-sortIcon",13),r(),o(7,"th",14),l(8,"Edificio "),d(9,"p-sortIcon",15),r(),o(10,"th",31),l(11,"Botellas (kg) "),d(12,"p-sortIcon",32),r(),o(13,"th",28),l(14,"Registrado Por "),d(15,"p-sortIcon",29),r()())}function _n(e,a){if(e&1&&(o(0,"tr")(1,"td"),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),l(8),r(),o(9,"td"),l(10),r()()),e&2){let t=a.$implicit;c(2),b(t.fecha),c(2),b(t.sede),c(2),b(t.edificio),c(2),b((t.botellas==null?null:t.botellas.toFixed(2))||"0.00"),c(2),b(t.registradoPor)}}function vn(e,a){e&1&&(o(0,"tr")(1,"td",33),l(2,"No hay registros de canastillas disponibles"),r()())}function Mn(e,a){e&1&&(o(0,"tr")(1,"th",10),l(2,"Fecha "),d(3,"p-sortIcon",11),r(),o(4,"th",12),l(5,"Sede "),d(6,"p-sortIcon",13),r(),o(7,"th",14),l(8,"Edificio "),d(9,"p-sortIcon",15),r(),o(10,"th",34),l(11,"Papel Oficina (kg) "),d(12,"p-sortIcon",35),r(),o(13,"th",28),l(14,"Registrado Por "),d(15,"p-sortIcon",29),r()())}function Pn(e,a){if(e&1&&(o(0,"tr")(1,"td"),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),l(8),r(),o(9,"td"),l(10),r()()),e&2){let t=a.$implicit;c(2),b(t.fecha),c(2),b(t.sede),c(2),b(t.edificio),c(2),b((t.papelOficina==null?null:t.papelOficina.toFixed(2))||"0.00"),c(2),b(t.registradoPor)}}function On(e,a){e&1&&(o(0,"tr")(1,"td",33),l(2,"No hay registros de papel oficina disponibles"),r()())}var Ot=class e{registros=[];pilasData=[];canastillasData=[];papelOficinaData=[];ngOnChanges(a){a.registros&&this.registros&&this.processData()}processData(){this.pilasData=[],this.canastillasData=[],this.papelOficinaData=[],this.registros.forEach(a=>{let t=new Date(a.fechaRegistro).toLocaleDateString("es-ES"),n=a.user?.sede?.nombre||"N/A",i=a.user?.edificio?.nombre||"N/A",s=`${a.user?.nombres||""} ${a.user?.apellidos||""}`.trim();a.tipoRecoleccion==="pilas"?this.pilasData.push({fecha:t,sede:n,edificio:i,plasticos:a.plasticosKg?Number(a.plasticosKg):0,organicos:a.organicosKg?Number(a.organicosKg):0,vidrio:a.vidrioKg?Number(a.vidrioKg):0,metales:a.metalesKg?Number(a.metalesKg):0,papelCarton:a.papelCartonKg?Number(a.papelCartonKg):0,noAprovechables:a.noAprovechablesKg?Number(a.noAprovechablesKg):0,registradoPor:s}):a.tipoRecoleccion==="canastillas"?this.canastillasData.push({fecha:t,sede:n,edificio:i,botellas:a.botellasKg?Number(a.botellasKg):0,registradoPor:s}):a.tipoRecoleccion==="papel_oficina"&&this.papelOficinaData.push({fecha:t,sede:n,edificio:i,papelOficina:a.papelOficinaKg?Number(a.papelOficinaKg):0,registradoPor:s})})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-report-table"]],inputs:{registros:"registros"},features:[R],decls:30,vars:20,consts:[[1,"report-table-container"],["value","0"],["value","1"],["value","2"],[1,"table-wrapper"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} registros","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} registros","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pSortableColumn","fecha"],["field","fecha"],["pSortableColumn","sede"],["field","sede"],["pSortableColumn","edificio"],["field","edificio"],["pSortableColumn","plasticos"],["field","plasticos"],["pSortableColumn","organicos"],["field","organicos"],["pSortableColumn","vidrio"],["field","vidrio"],["pSortableColumn","metales"],["field","metales"],["pSortableColumn","papelCarton"],["field","papelCarton"],["pSortableColumn","noAprovechables"],["field","noAprovechables"],["pSortableColumn","registradoPor"],["field","registradoPor"],["colspan","10",1,"text-center"],["pSortableColumn","botellas"],["field","botellas"],["colspan","5",1,"text-center"],["pSortableColumn","papelOficina"],["field","papelOficina"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"h2"),l(2,"Datos de Reciclaje Detallados"),r(),o(3,"p-tabs",1)(4,"p-tablist")(5,"p-tab",1),l(6,"Pilas"),r(),o(7,"p-tab",2),l(8,"Canastillas"),r(),o(9,"p-tab",3),l(10,"Papel Oficina"),r()(),o(11,"p-tabpanels")(12,"p-tabpanel",1)(13,"div",4)(14,"p-table",5),u(15,un,31,0,"ng-template",6)(16,fn,21,10,"ng-template",7)(17,hn,3,0,"ng-template",8),r()()(),o(18,"p-tabpanel",2)(19,"div",4)(20,"p-table",9),u(21,Cn,16,0,"ng-template",6)(22,_n,11,5,"ng-template",7)(23,vn,3,0,"ng-template",8),r()()(),o(24,"p-tabpanel",3)(25,"div",4)(26,"p-table",9),u(27,Mn,16,0,"ng-template",6)(28,Pn,11,5,"ng-template",7)(29,On,3,0,"ng-template",8),r()()()()()()),t&2&&(c(14),g("value",n.pilasData)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",D(16,At))("globalFilterFields",D(17,bn)),c(6),g("value",n.canastillasData)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",D(18,At)),c(6),g("value",n.papelOficinaData)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",D(19,At)))},dependencies:[C,Re,W,zt,Fe,Pt,Bt,xe,Me,ft,Pe,Oe],styles:[".report-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:clamp(1rem,3vw,1.5rem);box-shadow:0 2px 4px #0000001a}.report-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0d2a72;font-size:var(--text-xl);font-weight:var(--font-semibold);margin:0 0 clamp(1rem,2vw,1.5rem) 0}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-header{background:#f8f9fa;border:1px solid #e9ecef;padding:1rem;font-weight:var(--font-semibold)}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background-color:#0d2a72;color:#fff;border:1px solid #0a1f54;padding:1rem;font-weight:var(--font-semibold);font-size:var(--text-sm);text-align:left}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th .p-sortable-column-icon{color:#fff;margin-left:.5rem}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th:hover{background-color:#0f3085}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr{transition:background-color .2s ease}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:nth-child(2n){background-color:#f8f9fa}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background-color:#e9ecef}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{border:1px solid #e9ecef;padding:.875rem 1rem;font-size:var(--text-sm);color:#495057}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td.text-center{text-align:center;color:#6c757d;font-style:italic}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator{background:#f8f9fa;border:1px solid #e9ecef;padding:.5rem 1rem}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-current{color:#495057;font-size:var(--text-sm)}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2.5rem;height:2.5rem;border-radius:4px;color:#495057}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page.p-highlight{background-color:#0d2a72;border-color:#0d2a72;color:#fff}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page:hover:not(.p-highlight){background-color:#e9ecef}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-dropdown{border-color:#ced4da}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-dropdown:hover{border-color:#0d2a72}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-tabs .p-tablist{background:transparent;border-bottom:2px solid #e9ecef;display:flex;gap:.5rem;margin-bottom:1.5rem}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-tabs .p-tablist .p-tab{background:transparent;border:none;border-bottom:2px solid transparent;color:#6c757d;padding:.75rem 1.5rem;font-weight:var(--font-medium);font-size:var(--text-sm);cursor:pointer;transition:all .3s ease;margin-bottom:-2px}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-tabs .p-tablist .p-tab:hover{color:#0d2a72}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-tabs .p-tablist .p-tab.p-tab-active{color:#0d2a72;border-bottom-color:#0d2a72;font-weight:var(--font-semibold)}@media (max-width: 768px){.report-table-container[_ngcontent-%COMP%]{padding:1rem}.report-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--text-lg);margin-bottom:1rem}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable{font-size:var(--text-xs)}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.75rem .5rem;font-size:var(--text-xs);min-width:100px}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.625rem .5rem;font-size:var(--text-xs);min-width:100px;max-height:3rem;overflow:hidden;line-height:1.4;word-break:break-word;white-space:nowrap;text-overflow:ellipsis}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator{padding:.5rem;font-size:var(--text-xs)}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2rem;height:2rem}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-tabs .p-tablist .p-tab{padding:.625rem 1rem;font-size:var(--text-xs)}}@media (max-width: 480px){.report-table-container[_ngcontent-%COMP%]{padding:.75rem}.report-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:var(--text-base);margin-bottom:.75rem}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.5rem .25rem;min-width:90px}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.5rem .25rem;min-width:90px;max-height:2.8rem}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-tabs .p-tablist{flex-wrap:wrap}.report-table-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]     .p-tabs .p-tablist .p-tab{padding:.5rem .75rem;font-size:.75rem}}"]})};var xt=class e{constructor(a){this.http=a}apiUrl=`${ht.apiUrl}/registros/personal`;getHeaders(){let a=localStorage.getItem("access_token");return new J({Authorization:`Bearer ${a}`})}getStatistics(a){let t=new Dt;return a.startDate&&(t=t.set("startDate",a.startDate)),a.endDate&&(t=t.set("endDate",a.endDate)),a.sedeId&&(t=t.set("sedeId",a.sedeId)),a.edificioId&&(t=t.set("edificioId",a.edificioId)),this.http.get(`${this.apiUrl}/estadisticas`,{headers:this.getHeaders(),params:t})}exportToExcel(a){let t=new Dt;a.startDate&&(t=t.set("startDate",a.startDate)),a.endDate&&(t=t.set("endDate",a.endDate)),a.sedeId&&(t=t.set("sedeId",a.sedeId)),a.edificioId&&(t=t.set("edificioId",a.edificioId));let n=`${this.apiUrl}/export?${t.toString()}`,i=document.createElement("a");i.href=n,i.setAttribute("download",`reporte_reciclaje_${new Date().toISOString().split("T")[0]}.xlsx`),fetch(n,{headers:this.getHeaders().keys().reduce((s,p)=>(s[p]=this.getHeaders().get(p)||"",s),{})}).then(s=>s.blob()).then(s=>{let p=window.URL.createObjectURL(s),_=document.createElement("a");_.href=p,_.download=`reporte_reciclaje_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(p)})}static \u0275fac=function(t){return new(t||e)(Qt(ut))};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})};function yn(e,a){e&1&&(o(0,"div",7),d(1,"i",8),o(2,"p"),l(3,"Cargando datos..."),r()())}function wn(e,a){if(e&1&&(o(0,"div",9),d(1,"i",10),o(2,"p"),l(3),r()()),e&2){let t=f();c(3),b(t.error)}}function Sn(e,a){if(e&1&&(o(0,"div"),d(1,"app-report-metrics",11)(2,"app-report-summary",12)(3,"app-report-table",11),r()),e&2){let t=f();c(),g("registros",t.statistics.registros),c(),g("statistics",t.statistics)("currentFilters",t.currentFilters),c(),g("registros",t.statistics.registros)}}var yt=class e{constructor(a){this.reportService=a}statistics=null;currentFilters={};loading=!1;error=null;onFilterChange(a){this.currentFilters=a,this.loadData()}loadData(){this.loading=!0,this.error=null,this.reportService.getStatistics(this.currentFilters).subscribe({next:a=>{this.statistics=a,this.loading=!1},error:a=>{this.error="Error al cargar los datos. Por favor, intenta nuevamente.",this.loading=!1}})}onExport(){this.reportService.exportToExcel(this.currentFilters)}static \u0275fac=function(t){return new(t||e)(st(xt))};static \u0275cmp=h({type:e,selectors:[["app-data-report-page"]],decls:8,vars:3,consts:[[1,"data-report-page"],[1,"report-section"],[1,"section-title"],[3,"filterChange","exportClick"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2rem"],[1,"error-container"],[1,"pi","pi-exclamation-triangle",2,"font-size","2rem","color","#ff6b6b"],[3,"registros"],[3,"statistics","currentFilters"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"section",1)(2,"h2",2),l(3,"Datos de Reciclaje"),r(),o(4,"app-report-filters",3),O("filterChange",function(s){return n.onFilterChange(s)})("exportClick",function(){return n.onExport()}),r(),u(5,yn,4,0,"div",4)(6,wn,4,1,"div",5)(7,Sn,4,4,"div",6),r()()),t&2&&(c(5),g("ngIf",n.loading),c(),g("ngIf",n.error&&!n.loading),c(),g("ngIf",!n.loading&&!n.error&&n.statistics))},dependencies:[C,j,Ct,vt,Mt,Ot],styles:[".data-report-page[_ngcontent-%COMP%]{padding:clamp(1rem,2vw,1.5rem);max-width:1400px;margin:0 auto}.data-report-page[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]{margin-bottom:clamp(2rem,4vw,3rem)}.data-report-page[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:clamp(1.25rem,2.5vw,1.75rem);font-weight:700;color:#0d2a72;margin:0 0 clamp(1rem,2vw,1.5rem) 0;padding-bottom:.75rem;border-bottom:3px solid #0D2A72}.data-report-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;gap:1rem;background:var(--surface-card);border-radius:8px;box-shadow:0 2px 4px #0000001a;margin:1.5rem 0}.data-report-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#666}.data-report-page[_ngcontent-%COMP%]   app-report-filters[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   app-report-metrics[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   app-report-summary[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   app-report-table[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.data-report-page[_ngcontent-%COMP%]{padding:1rem}.data-report-page[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]{margin-bottom:2rem}.data-report-page[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom-width:2px}.data-report-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{padding:2rem}.data-report-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.data-report-page[_ngcontent-%COMP%]{padding:.75rem}.data-report-page[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.data-report-page[_ngcontent-%COMP%]   .report-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.125rem}.data-report-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{padding:1.5rem}.data-report-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .data-report-page[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}}"]})};var ki=[{path:"",component:yt}];export{ki as DATA_REPORT_ROUTES};

import{b as ke}from"./chunk-ZWIYMAYH.js";import{b as ue}from"./chunk-I2MWH7UF.js";import{d as S}from"./chunk-Q3PSKWJA.js";import{b as E}from"./chunk-ADSAMHCS.js";import{e as _e,f as xe,g as ve,h as Me,i as Pe,j as Oe,k as ye}from"./chunk-6CKB7PEI.js";import{h as he,i as Ce}from"./chunk-MD5RATJP.js";import{K as fe,L as R,c as oe,d as re,f as ie,g as ae,i as se,j as ce,k as le,m as de,n as ge,o as pe,p as me,r as be}from"./chunk-QRAL5O2C.js";import{ra as te,sa as w,ya as ne}from"./chunk-724CLJNZ.js";import{a as I}from"./chunk-H7Z7H6FO.js";import{$a as d,Aa as L,Ab as C,Bb as c,Cb as p,Db as x,Dc as P,Fc as k,Ga as h,Ib as K,Jb as Q,L as A,La as m,M as U,Ma as W,Oa as q,Q as $,Qa as g,Sb as H,Tb as V,V as D,W as N,Wa as O,X as G,ab as r,bb as i,cb as l,fa as B,jb as Y,lb as b,nb as f,pc as X,qc as Z,rc as y,uc as ee,va as s,wc as u,xb as J,yb as M}from"./chunk-YLSQQ73F.js";import"./chunk-4CLCTAJ7.js";function Ne(n,o){n&1&&l(0,"i",24)}function Be(n,o){n&1&&l(0,"i",24)}function He(n,o){if(n&1){let e=Y();r(0,"div",17)(1,"span",18),c(2),i(),r(3,"div",19)(4,"div",20),b("click",function(){let a=D(e).index,v=f();return N(v.seleccionarCheckbox(a,!0))}),r(5,"label",21),c(6,"SI"),i(),r(7,"div",22),g(8,Ne,1,0,"i",23),i()(),r(9,"div",20),b("click",function(){let a=D(e).index,v=f();return N(v.seleccionarCheckbox(a,!1))}),r(10,"label",21),c(11,"NO"),i(),r(12,"div",22),g(13,Be,1,0,"i",23),i()()()()}if(n&2){let e=o.$implicit,t=o.index,a=f();d("ngClass",e.color),s(2),p(e.nombre),s(5),M("checked",a.isCheckboxSelected(t,!0)),s(),d("ngIf",a.isCheckboxSelected(t,!0)),s(4),M("checked",a.isCheckboxSelected(t,!1)),s(),d("ngIf",a.isCheckboxSelected(t,!1))}}function Ve(n,o){if(n&1&&(r(0,"div",27),l(1,"i"),r(2,"p"),c(3),i()()),n&2){let e=o.$implicit;C(e.severity==="success"?"message-success":"message-error"),s(),C(e.severity==="success"?"pi pi-check-circle":"pi pi-times-circle"),s(2),p(e.detail)}}function je(n,o){if(n&1&&(r(0,"div",25),g(1,Ve,4,5,"div",26),i()),n&2){let e=f();s(),d("ngForOf",e.messages)}}var z=class n{constructor(o,e,t){this.fb=o;this.http=e;this.router=t;this.registroForm=this.fb.group({pilaId:["",re.required],observaciones:[""]})}registroForm;isSubmitting=!1;messages=[];sedeName="";edificioName="";pilas=[];selecciones=new Map;tiposResiduos=[{nombre:"Papel y Cart\xF3n",color:"bg-blue-500",icono:"pi-file"},{nombre:"Pl\xE1sticos",color:"bg-gray-400",icono:"pi-box"},{nombre:"Metales",color:"bg-yellow-500",icono:"pi-circle"},{nombre:"Org\xE1nicos",color:"bg-amber-700",icono:"pi-sun"},{nombre:"Vidrios",color:"bg-gray-600",icono:"pi-star"},{nombre:"No aprovechables",color:"bg-black",icono:"pi-times"}];apiUrl=I.apiUrl;ngOnInit(){this.loadUserInfo()}loadUserInfo(){let o=JSON.parse(localStorage.getItem("current_user")||"{}");if(!o.sede||!o.edificio){this.messages=[{severity:"error",summary:"Error",detail:"No se pudo obtener la informaci\xF3n de la sede y edificio"}];return}this.sedeName=o.sede.nombre||"No asignada",this.edificioName=o.edificio.nombre||"No asignado",this.loadPilas()}loadPilas(){let o=localStorage.getItem("access_token"),e=new P({Authorization:`Bearer ${o}`});this.http.get(`${this.apiUrl}/pilas/mi-edificio`,{headers:e}).subscribe({next:t=>{this.pilas=t,t&&t.length>0&&this.registroForm.patchValue({pilaId:t[0].id})},error:t=>{console.error("Error al cargar pilas:",t),this.messages=[{severity:"error",summary:"Error",detail:"No se pudieron cargar las pilas"}],setTimeout(()=>{this.messages=[]},5e3)}})}seleccionarCheckbox(o,e){this.selecciones.get(o)===e?this.selecciones.delete(o):this.selecciones.set(o,e)}isCheckboxSelected(o,e){return this.selecciones.get(o)===e}onSubmit(){if(this.registroForm.invalid){this.registroForm.markAllAsTouched(),this.messages=[{severity:"error",summary:"Error",detail:"Por favor complete todos los campos obligatorios"}],setTimeout(()=>{this.messages=[]},5e3);return}if(this.selecciones.size===0){this.messages=[{severity:"error",summary:"Error",detail:"Debe seleccionar al menos un tipo de residuo"}],setTimeout(()=>{this.messages=[]},5e3);return}this.isSubmitting=!0,this.messages=[];let o=localStorage.getItem("access_token"),e=new P({Authorization:`Bearer ${o}`,"Content-Type":"application/json"}),t=[],a=!0;this.selecciones.forEach((_,Re)=>{let ze=this.tiposResiduos[Re].nombre;t.push({nombre:ze,segregado:_}),_||(a=!1)});let v={pilaId:this.registroForm.value.pilaId,observaciones:this.registroForm.value.observaciones||"",segregacionCorrecta:a,residuos:t};this.http.post(`${this.apiUrl}/registros/estudiante`,v,{headers:e}).subscribe({next:_=>{this.messages=[{severity:"success",summary:"\xC9xito",detail:"Registro guardado exitosamente"}],this.registroForm.patchValue({pilaId:"",observaciones:""}),this.selecciones.clear(),this.isSubmitting=!1,setTimeout(()=>{this.messages=[]},5e3)},error:_=>{console.error("Error al guardar registro:",_),this.messages=[{severity:"error",summary:"Error",detail:_.error?.message||"Error al guardar el registro"}],this.isSubmitting=!1,setTimeout(()=>{this.messages=[]},5e3)}})}verRegistros(){this.router.navigate(["/app/estudiante/registros"])}static \u0275fac=function(e){return new(e||n)(h(de),h(k),h(S))};static \u0275cmp=m({type:n,selectors:[["app-dashboard"]],decls:22,vars:10,consts:[[1,"dashboard-container-estudiante"],[1,"dashboard-wrapper-estudiante"],[1,"header-card-estudiante"],[1,"header-title-estudiante"],[1,"header-subtitle-estudiante"],[1,"dashboard-form-estudiante",3,"ngSubmit","formGroup"],[1,"edificio-selector-estudiante"],[1,"edificio-label"],["formControlName","pilaId","optionLabel","codigo","optionValue","id","placeholder","Seleccionar Pila","styleClass","w-full",3,"options","showClear"],[1,"residuos-grid"],["class","residuo-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"observaciones-field-estudiante"],["for","observaciones",1,"observaciones-label"],["id","observaciones","formControlName","observaciones","rows","3","placeholder","Agregue cualquier observaci\xF3n sobre la segregaci\xF3n...",1,"observaciones-textarea"],["class","messages-container-estudiante",4,"ngIf"],[1,"button-container-estudiante"],["type","submit","severity","secondary","styleClass","enviar-button",3,"label","disabled","loading"],[1,"residuo-card",3,"ngClass"],[1,"residuo-label"],[1,"checkbox-group"],[1,"checkbox-wrapper",3,"click"],[1,"checkbox-label"],[1,"custom-checkbox"],["class","pi pi-check",4,"ngIf"],[1,"pi","pi-check"],[1,"messages-container-estudiante"],["class","message",3,"class",4,"ngFor","ngForOf"],[1,"message"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),c(4),i(),r(5,"p",4),c(6,"Ingrese los datos correctamente"),i()(),r(7,"form",5),b("ngSubmit",function(){return t.onSubmit()}),r(8,"div",6)(9,"label",7),c(10),i(),l(11,"p-select",8),i(),r(12,"div",9),g(13,He,14,8,"div",10),i(),r(14,"div",11)(15,"label",12),c(16,"Comentarios (Opcional)"),i(),r(17,"textarea",13),c(18,"        "),i()(),g(19,je,2,1,"div",14),r(20,"div",15),l(21,"p-button",16),i()()()()),e&2&&(s(4),x("Formulario SEDE ",t.sedeName," - ADMINISTRATIVO"),s(3),d("formGroup",t.registroForm),s(3),x("Edificio: ",t.edificioName),s(),d("options",t.pilas)("showClear",!1),s(2),d("ngForOf",t.tiposResiduos),s(6),d("ngIf",t.messages.length>0),s(2),d("label",t.isSubmitting?"Enviando...":"Enviar")("disabled",t.isSubmitting)("loading",t.isSubmitting))},dependencies:[u,X,Z,y,pe,se,oe,ie,ae,ce,le,ge,E,be,R,fe,ue,Ce,he,ve,xe],styles:[".dashboard-container-estudiante[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding:clamp(1rem,4vw,2rem) clamp(.5rem,2vw,1rem)}.dashboard-wrapper-estudiante[_ngcontent-%COMP%]{max-width:850px;margin:0 auto}.header-card-estudiante[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e3c72,#2a5298);border-radius:12px 12px 0 0;padding:clamp(1rem,3vw,1.5rem);text-align:center;box-shadow:0 4px 6px #0000001a;margin-bottom:0}.header-title-estudiante[_ngcontent-%COMP%]{color:#fff;font-size:var(--text-xl);font-weight:var(--font-bold);margin:0 0 .25rem;text-transform:uppercase;letter-spacing:var(--tracking-wide)}.header-subtitle-estudiante[_ngcontent-%COMP%]{color:#ffffffe6;font-size:var(--text-sm);margin:0}.dashboard-form-estudiante[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 12px 12px;box-shadow:0 4px 12px #0000001a;padding:clamp(1rem,3vw,1.5rem)}.edificio-selector-estudiante[_ngcontent-%COMP%]{margin-bottom:clamp(1rem,3vw,1.5rem)}.edificio-selector-estudiante[_ngcontent-%COMP%]   .edificio-label[_ngcontent-%COMP%]{display:block;font-size:var(--text-sm);font-weight:var(--font-semibold);color:#475569;margin-bottom:.5rem}.edificio-selector-estudiante[_ngcontent-%COMP%]     .p-select{width:100%;border:1px solid #cbd5e1;border-radius:8px;background:#f8fafc}.edificio-selector-estudiante[_ngcontent-%COMP%]     .p-select .p-select-label{padding:clamp(.5rem,1.5vw,.75rem) clamp(.75rem,2vw,1rem);color:#64748b;font-size:var(--text-sm)}.edificio-selector-estudiante[_ngcontent-%COMP%]     .p-select:hover{border-color:#94a3b8}.residuos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:clamp(.5rem,1.5vw,.75rem);margin-bottom:clamp(1rem,3vw,1.5rem)}.residuo-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:clamp(.75rem,2vw,1rem) clamp(1rem,3vw,1.5rem);border-radius:8px;color:#fff;font-weight:600;transition:all .2s ease}.residuo-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0003}.residuo-card.bg-blue-500[_ngcontent-%COMP%]{background:#1c5efb}.residuo-card.bg-gray-400[_ngcontent-%COMP%]{background:#fff;color:#333}.residuo-card.bg-yellow-500[_ngcontent-%COMP%]{background:#ffeb00;color:#333}.residuo-card.bg-amber-700[_ngcontent-%COMP%]{background:#6f4e37}.residuo-card.bg-gray-600[_ngcontent-%COMP%]{background:gray}.residuo-card.bg-black[_ngcontent-%COMP%]{background:#000}.residuo-label[_ngcontent-%COMP%]{font-size:var(--text-base);flex:1}.checkbox-group[_ngcontent-%COMP%]{display:flex;gap:clamp(1rem,4vw,2rem);align-items:center}.checkbox-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:clamp(.25rem,.75vw,.35rem);cursor:pointer}.checkbox-label[_ngcontent-%COMP%]{font-size:var(--text-xs);font-weight:var(--font-bold);text-transform:uppercase;letter-spacing:var(--tracking-wide);opacity:.9}.bg-gray-400[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%], .bg-yellow-500[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{color:#333}.bg-blue-500[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%], .bg-amber-700[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%], .bg-gray-600[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%], .bg-black[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{color:#fff}.custom-checkbox[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem;border-radius:6px;transition:all .2s;display:flex;align-items:center;justify-content:center;cursor:pointer}.custom-checkbox[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:#059669}.bg-blue-500[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%], .bg-amber-700[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%], .bg-gray-600[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%], .bg-black[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{border:2px solid white;background:#fff3}.bg-blue-500[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]:hover, .bg-amber-700[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]:hover, .bg-gray-600[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]:hover, .bg-black[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.05)}.bg-blue-500[_ngcontent-%COMP%]   .custom-checkbox.checked[_ngcontent-%COMP%], .bg-amber-700[_ngcontent-%COMP%]   .custom-checkbox.checked[_ngcontent-%COMP%], .bg-gray-600[_ngcontent-%COMP%]   .custom-checkbox.checked[_ngcontent-%COMP%], .bg-black[_ngcontent-%COMP%]   .custom-checkbox.checked[_ngcontent-%COMP%]{background:#fff;border-color:#fff}.bg-gray-400[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%], .bg-yellow-500[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{border:2px solid #333;background:#3333331a}.bg-gray-400[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]:hover, .bg-yellow-500[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]:hover{background:#3333;transform:scale(1.05)}.bg-gray-400[_ngcontent-%COMP%]   .custom-checkbox.checked[_ngcontent-%COMP%], .bg-yellow-500[_ngcontent-%COMP%]   .custom-checkbox.checked[_ngcontent-%COMP%]{background:#333;border-color:#333}.bg-gray-400[_ngcontent-%COMP%]   .custom-checkbox.checked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .bg-yellow-500[_ngcontent-%COMP%]   .custom-checkbox.checked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981}.observaciones-field-estudiante[_ngcontent-%COMP%]{margin-bottom:1.5rem}.observaciones-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#374151;margin-bottom:.5rem;font-size:.95rem}.observaciones-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:.95rem;font-family:inherit;transition:all .2s;resize:vertical}.observaciones-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#10b981;box-shadow:0 0 0 3px #10b9811a}.observaciones-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.messages-container-estudiante[_ngcontent-%COMP%]{margin-bottom:1.5rem}.message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;border-radius:8px;margin-bottom:.5rem}.message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500}.message.message-success[_ngcontent-%COMP%]{background:#d1fae5;border-left:4px solid #10b981;color:#065f46}.message.message-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981}.message.message-error[_ngcontent-%COMP%]{background:#fee2e2;border-left:4px solid #ef4444;color:#991b1b}.message.message-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444}.button-container-estudiante[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.button-container-estudiante[_ngcontent-%COMP%]     .p-button{width:100%;max-width:400px;padding:1rem 2rem;font-size:1rem;font-weight:700;border-radius:8px;text-transform:uppercase;letter-spacing:.5px;transition:all .3s ease;background:linear-gradient(135deg,#6b7280,#4b5563);border:none;color:#fff}.button-container-estudiante[_ngcontent-%COMP%]     .p-button:enabled:hover{background:linear-gradient(135deg,#4b5563,#374151);transform:translateY(-2px);box-shadow:0 4px 12px #6b72804d}.button-container-estudiante[_ngcontent-%COMP%]     .p-button:disabled{opacity:.6;cursor:not-allowed}.button-container-estudiante[_ngcontent-%COMP%]     .p-button .p-button-icon{font-size:1rem}@media (max-width: 640px){.dashboard-container-estudiante[_ngcontent-%COMP%]{padding:1rem .5rem}.dashboard-wrapper-estudiante[_ngcontent-%COMP%]{max-width:100%}.header-title-estudiante[_ngcontent-%COMP%]{font-size:1rem}.header-subtitle-estudiante[_ngcontent-%COMP%]{font-size:.75rem}.checkbox-group[_ngcontent-%COMP%]{gap:1rem}.button-container-estudiante[_ngcontent-%COMP%]     .p-button{max-width:100%}}"]})};var we=`
    .p-progressspinner {
        position: relative;
        margin: 0 auto;
        width: 100px;
        height: 100px;
        display: inline-block;
    }

    .p-progressspinner::before {
        content: '';
        display: block;
        padding-top: 100%;
    }

    .p-progressspinner-spin {
        height: 100%;
        transform-origin: center center;
        width: 100%;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
        animation: p-progressspinner-rotate 2s linear infinite;
    }

    .p-progressspinner-circle {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: 0;
        stroke: dt('progressspinner.colorOne');
        animation:
            p-progressspinner-dash 1.5s ease-in-out infinite,
            p-progressspinner-color 6s ease-in-out infinite;
        stroke-linecap: round;
    }

    @keyframes p-progressspinner-rotate {
        100% {
            transform: rotate(360deg);
        }
    }
    @keyframes p-progressspinner-dash {
        0% {
            stroke-dasharray: 1, 200;
            stroke-dashoffset: 0;
        }
        50% {
            stroke-dasharray: 89, 200;
            stroke-dashoffset: -35px;
        }
        100% {
            stroke-dasharray: 89, 200;
            stroke-dashoffset: -124px;
        }
    }
    @keyframes p-progressspinner-color {
        100%,
        0% {
            stroke: dt('progressspinner.color.one');
        }
        40% {
            stroke: dt('progressspinner.color.two');
        }
        66% {
            stroke: dt('progressspinner.color.three');
        }
        80%,
        90% {
            stroke: dt('progressspinner.color.four');
        }
    }
`;var Ae={root:()=>["p-progressspinner"],spin:"p-progressspinner-spin",circle:"p-progressspinner-circle"},Ie=(()=>{class n extends ne{name="progressspinner";theme=we;classes=Ae;static \u0275fac=(()=>{let e;return function(a){return(e||(e=B(n)))(a||n)}})();static \u0275prov=A({token:n,factory:n.\u0275fac})}return n})();var Ue=(()=>{class n extends me{styleClass;strokeWidth="2";fill="none";animationDuration="2s";ariaLabel;_componentStyle=$(Ie);static \u0275fac=(()=>{let e;return function(a){return(e||(e=B(n)))(a||n)}})();static \u0275cmp=m({type:n,selectors:[["p-progressSpinner"],["p-progress-spinner"],["p-progressspinner"]],hostVars:7,hostBindings:function(t,a){t&2&&(O("aria-label",a.ariaLabel)("role","progressbar")("data-pc-name","progressspinner")("data-pc-section","root")("aria-busy",!0),C(a.cn(a.cx("root"),a.styleClass)))},inputs:{styleClass:"styleClass",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration",ariaLabel:"ariaLabel"},features:[K([Ie]),q],decls:2,vars:9,consts:[["viewBox","25 25 50 50"],["cx","50","cy","50","r","20","stroke-miterlimit","10"]],template:function(t,a){t&1&&(G(),r(0,"svg",0),l(1,"circle",1),i()),t&2&&(C(a.cx("spin")),J("animation-duration",a.animationDuration),O("data-pc-section","root"),s(),C(a.cx("circle")),O("fill",a.fill)("stroke-width",a.strokeWidth))},dependencies:[u,w],encapsulation:2,changeDetection:0})}return n})(),Ee=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=W({type:n});static \u0275inj=U({imports:[Ue,w,w]})}return n})();var F=class n{onBack=new L;handleBack(){this.onBack.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-registros-hero"]],outputs:{onBack:"onBack"},decls:8,vars:0,consts:[[1,"registros-hero"],[1,"hero-content"],[1,"hero-text"],[1,"hero-title"],[1,"hero-subtitle"],["label","Volver al Formulario","variant","secondary","icon","pi pi-arrow-left",3,"onClick"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),c(4,"Mis Registros"),i(),r(5,"p",4),c(6,"Historial de tus verificaciones de segregaci\xF3n"),i()(),r(7,"app-button",5),b("onClick",function(){return t.handleBack()}),i()()())},dependencies:[u,_e],styles:[".registros-hero[_ngcontent-%COMP%]{background:#0d2a72;padding:2rem;border-radius:12px;margin-bottom:2rem;box-shadow:0 2px 8px #0d2a721a}.registros-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1.5rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]{flex:1}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;margin:0 0 .5rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#fffffff2;margin:0}@media (max-width: 768px){.registros-hero[_ngcontent-%COMP%]{padding:1.5rem}.registros-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.5rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:.875rem}}@media (max-width: 480px){.registros-hero[_ngcontent-%COMP%]{padding:1rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:1.25rem}.registros-hero[_ngcontent-%COMP%]   .hero-text[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:.8rem}}"]})};var $e=()=>[5,10,20];function Ge(n,o){n&1&&(r(0,"div",6),l(1,"i",7),r(2,"p"),c(3,"Cargando registros..."),i()())}function Le(n,o){n&1&&(r(0,"div",8),l(1,"i",9),r(2,"p",10),c(3,"No hay registros todav\xEDa"),i(),r(4,"p",11),c(5,"Realiza tu primer registro desde el formulario"),i()())}function We(n,o){n&1&&(r(0,"tr")(1,"th",17),c(2,"Fecha "),l(3,"p-sortIcon",18),i(),r(4,"th",19),c(5,"Edificio "),l(6,"p-sortIcon",20),i(),r(7,"th",21),c(8,"C\xF3digo Pila "),l(9,"p-sortIcon",22),i(),r(10,"th",23),c(11,"Segregado Correctamente"),i(),r(12,"th",23),c(13,"Segregado Incorrectamente"),i(),r(14,"th"),c(15,"Observaciones"),i()())}function qe(n,o){if(n&1&&(r(0,"tr")(1,"td")(2,"div",24),l(3,"i",25),r(4,"span",26),c(5),H(6,"date"),i()(),r(7,"div",27),c(8),H(9,"date"),i()(),r(10,"td")(11,"div",28),l(12,"i",29),r(13,"span"),c(14),i()()(),r(15,"td")(16,"span",30),c(17),i()(),r(18,"td",23)(19,"span",31),c(20),i()(),r(21,"td",23)(22,"span",32),c(23),i()(),r(24,"td")(25,"span",33),c(26),i()()()),n&2){let e=o.$implicit,t=f(2);s(5),p(V(6,9,e.fechaRegistro,"dd/MM/yyyy")),s(3),x(" ",V(9,12,e.fechaRegistro,"HH:mm")," "),s(6),p((e.edificio==null?null:e.edificio.nombre)||"N/A"),s(3),p(e.codigoPila),s(3),p(t.getConteoCorrectos(e)),s(3),p(t.getConteoIncorrectos(e)),s(2),M("sin-observaciones",!e.observaciones),s(),x(" ",e.observaciones||"Sin observaciones"," ")}}function Ye(n,o){n&1&&(r(0,"tr")(1,"td",34)(2,"div",35),l(3,"i",36),r(4,"p"),c(5,"No se encontraron registros"),i()()()())}function Je(n,o){if(n&1&&(r(0,"div",12)(1,"p-table",13),g(2,We,16,0,"ng-template",14)(3,qe,27,15,"ng-template",15)(4,Ye,6,0,"ng-template",16),i()()),n&2){let e=f();s(),d("value",e.registros)("paginator",!0)("rows",10)("rowsPerPageOptions",Q(5,$e))("showCurrentPageReport",!0)}}var T=class n{constructor(o,e){this.http=o;this.router=e}registros=[];loading=!0;apiUrl=I.apiUrl;ngOnInit(){this.loadRegistros()}loadRegistros(){let o=localStorage.getItem("access_token"),e=new P({Authorization:`Bearer ${o}`});this.http.get(`${this.apiUrl}/registros/estudiante/historial`,{headers:e}).subscribe({next:t=>{this.registros=t,this.loading=!1},error:t=>{console.error("Error al cargar registros:",t),this.loading=!1}})}volver(){this.router.navigate(["/app/estudiante/dashboard"])}getConteoCorrectos(o){let e=0;return[o.papelCartonSegregado,o.plasticoSegregado,o.metalSegregado,o.organicoSegregado,o.vidrioSegregado,o.noAprovechableSegregado].forEach(a=>{a===!0&&e++}),e}getConteoIncorrectos(o){let e=0;return[o.papelCartonSegregado,o.plasticoSegregado,o.metalSegregado,o.organicoSegregado,o.vidrioSegregado,o.noAprovechableSegregado].forEach(a=>{a===!1&&e++}),e}static \u0275fac=function(e){return new(e||n)(h(k),h(S))};static \u0275cmp=m({type:n,selectors:[["app-registros"]],decls:6,vars:3,consts:[[1,"registros-page"],[1,"page-container"],[3,"onBack"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","registros-table-container",4,"ngIf"],[1,"loading-state"],[1,"pi","pi-spin","pi-spinner"],[1,"empty-state"],[1,"pi","pi-inbox"],[1,"empty-title"],[1,"empty-subtitle"],[1,"registros-table-container"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} registros","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","fechaRegistro"],["field","fechaRegistro"],["pSortableColumn","edificio.nombre"],["field","edificio.nombre"],["pSortableColumn","codigoPila"],["field","codigoPila"],[1,"text-center"],[1,"fecha-cell"],[1,"pi","pi-calendar"],[1,"fecha-principal"],[1,"hora-cell"],[1,"edificio-cell"],[1,"pi","pi-building"],[1,"codigo-pila"],[1,"conteo-correcto"],[1,"conteo-incorrecto"],[1,"observaciones-cell"],["colspan","6",1,"empty-message"],[1,"no-data"],[1,"pi","pi-inbox",2,"font-size","3rem","color","#ccc"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"app-registros-hero",2),b("onBack",function(){return t.volver()}),i(),g(3,Ge,4,0,"div",3)(4,Le,6,0,"div",4)(5,Je,5,6,"div",5),i()()),e&2&&(s(3),d("ngIf",t.loading),s(),d("ngIf",!t.loading&&t.registros.length===0),s(),d("ngIf",!t.loading&&t.registros.length>0))},dependencies:[u,y,ye,Me,te,Pe,Oe,E,R,ke,Ee,F,ee],styles:[".registros-page[_ngcontent-%COMP%]{min-height:100vh;background:#f3f4f6;padding:2rem}.registros-page[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;gap:1rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#16a34a}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#6b7280;margin:0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;gap:.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#d1d5db;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#374151;margin:0}.empty-state[_ngcontent-%COMP%]   .empty-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0}.registros-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014;overflow:hidden}.registros-table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:clamp(2rem,5vw,3rem);color:#999}.registros-table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0;font-size:var(--text-base)}.registros-table-container[_ngcontent-%COMP%]   .fecha-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.registros-table-container[_ngcontent-%COMP%]   .fecha-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .registros-table-container[_ngcontent-%COMP%]   .fecha-cell[_ngcontent-%COMP%]   .fecha-principal[_ngcontent-%COMP%]{color:#495057;font-size:var(--text-sm)}.registros-table-container[_ngcontent-%COMP%]   .hora-cell[_ngcontent-%COMP%]{font-size:var(--text-sm);color:#495057;margin-top:.25rem}.registros-table-container[_ngcontent-%COMP%]   .edificio-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#495057;font-size:var(--text-sm)}.registros-table-container[_ngcontent-%COMP%]   .edificio-cell[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#495057}.registros-table-container[_ngcontent-%COMP%]   .codigo-pila[_ngcontent-%COMP%]{color:#495057;font-size:var(--text-sm)}.registros-table-container[_ngcontent-%COMP%]   .conteo-correcto[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:var(--font-semibold);color:#198754}.registros-table-container[_ngcontent-%COMP%]   .conteo-incorrecto[_ngcontent-%COMP%]{font-size:var(--text-sm);font-weight:var(--font-semibold);color:#dc3545}.registros-table-container[_ngcontent-%COMP%]   .observaciones-cell[_ngcontent-%COMP%]{font-size:var(--text-sm);color:#495057}.registros-table-container[_ngcontent-%COMP%]   .observaciones-cell.sin-observaciones[_ngcontent-%COMP%]{color:#6c757d;font-style:italic}  .registros-table-container .p-datatable .p-datatable-header{background:#f8f9fa;border:1px solid #e9ecef;padding:1rem;font-weight:var(--font-semibold)}  .registros-table-container .p-datatable .p-datatable-thead>tr>th{background-color:#0d2a72;color:#fff;border:1px solid #0a1f54;padding:1rem;font-weight:var(--font-semibold);font-size:var(--text-sm);text-align:left}  .registros-table-container .p-datatable .p-datatable-thead>tr>th.text-center{text-align:center}  .registros-table-container .p-datatable .p-datatable-thead>tr>th .p-sortable-column-icon{color:#fff;margin-left:.5rem}  .registros-table-container .p-datatable .p-datatable-thead>tr>th:hover{background-color:#0f3085}  .registros-table-container .p-datatable .p-datatable-tbody>tr{transition:background-color .2s ease}  .registros-table-container .p-datatable .p-datatable-tbody>tr:nth-child(2n){background-color:#f8f9fa}  .registros-table-container .p-datatable .p-datatable-tbody>tr:hover{background-color:#e9ecef}  .registros-table-container .p-datatable .p-datatable-tbody>tr>td{border:1px solid #e9ecef;padding:.875rem 1rem;font-size:var(--text-sm);color:#495057}  .registros-table-container .p-datatable .p-datatable-tbody>tr>td.text-center{text-align:center}  .registros-table-container .p-datatable .p-datatable-tbody>tr>td.empty-message{border:none;padding:0}  .registros-table-container .p-datatable .p-paginator{background:#f8f9fa;border:1px solid #e9ecef;padding:.5rem 1rem}  .registros-table-container .p-datatable .p-paginator .p-paginator-current{color:#495057;font-size:var(--text-sm)}  .registros-table-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2.5rem;height:2.5rem;border-radius:4px;color:#495057}  .registros-table-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page.p-highlight{background-color:#0d2a72;border-color:#0d2a72;color:#fff}  .registros-table-container .p-datatable .p-paginator .p-paginator-pages .p-paginator-page:hover:not(.p-highlight){background-color:#e9ecef}  .registros-table-container .p-datatable .p-paginator .p-dropdown{border-color:#ced4da}  .registros-table-container .p-datatable .p-paginator .p-dropdown:hover{border-color:#0d2a72}@media (max-width: 768px){.registros-page[_ngcontent-%COMP%]{padding:1rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:3rem 1.5rem}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.registros-table-container[_ngcontent-%COMP%]     .p-datatable{font-size:var(--text-xs)}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.75rem .5rem;font-size:var(--text-xs)}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.625rem .5rem;font-size:var(--text-xs)}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-paginator{padding:.5rem;font-size:var(--text-xs)}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-paginator .p-paginator-pages .p-paginator-page{min-width:2rem;height:2rem}}@media (max-width: 480px){.registros-page[_ngcontent-%COMP%]{padding:.75rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:2rem 1rem}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.5rem .25rem}.registros-table-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.5rem .25rem}}"]})};var Kt=[{path:"dashboard",component:z},{path:"registros",component:T},{path:"",redirectTo:"dashboard",pathMatch:"full"}];export{Kt as ESTUDIANTE_ROUTES};
